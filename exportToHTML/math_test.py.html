<html>
<head>
<title>math_test.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
math_test.py</font>
</center></td></tr></table>
<pre><span class="s0"># -*- coding: utf-8 -*-</span>
<span class="s2">import </span><span class="s1">sys</span>
<span class="s2">import </span><span class="s1">unittest</span>
<span class="s2">import </span><span class="s1">math</span>
<span class="s2">from </span><span class="s1">time </span><span class="s2">import </span><span class="s1">clock</span>
<span class="s2">import </span><span class="s1">platform</span>

<span class="s2">import </span><span class="s1">pygame.math</span>
<span class="s2">from </span><span class="s1">pygame.math </span><span class="s2">import </span><span class="s1">Vector2</span><span class="s2">, </span><span class="s1">Vector3</span>

<span class="s1">IS_PYPY = </span><span class="s3">'PyPy' </span><span class="s1">== platform.python_implementation()</span>
<span class="s1">PY3 = sys.version_info.major == </span><span class="s4">3</span>


<span class="s2">class </span><span class="s1">Vector2TypeTest(unittest.TestCase):</span>

    <span class="s2">def </span><span class="s1">setUp(self):</span>
        <span class="s1">pygame.math.enable_swizzling()</span>
        <span class="s1">self.zeroVec = Vector2()</span>
        <span class="s1">self.e1 = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.e2 = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.t1 = (</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.l1 = list(self.t1)</span>
        <span class="s1">self.v1 = Vector2(self.t1)</span>
        <span class="s1">self.t2 = (</span><span class="s4">5.6</span><span class="s2">, </span><span class="s4">7.8</span><span class="s1">)</span>
        <span class="s1">self.l2 = list(self.t2)</span>
        <span class="s1">self.v2 = Vector2(self.t2)</span>
        <span class="s1">self.s1 = </span><span class="s4">5.6</span>
        <span class="s1">self.s2 = </span><span class="s4">7.8</span>

    <span class="s2">def </span><span class="s1">tearDown(self):</span>
        <span class="s1">pygame.math.enable_swizzling()</span>

    <span class="s2">def </span><span class="s1">testConstructionDefault(self):</span>
        <span class="s1">v = Vector2()</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionScalar(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionScalarKeywords(self):</span>
        <span class="s1">v = Vector2(x=</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionKeywords(self):</span>
        <span class="s1">v = Vector2(x=</span><span class="s4">1</span><span class="s2">, </span><span class="s1">y=</span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">2.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionXY(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionTuple(self):</span>
        <span class="s1">v = Vector2((</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionList(self):</span>
        <span class="s1">v = Vector2([</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionVector2(self):</span>
        <span class="s1">v = Vector2(Vector2(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testAttributAccess(self):</span>
        <span class="s1">tmp = self.v1.x</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.y</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.v1.x = </span><span class="s4">3.141</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s2">, </span><span class="s4">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.y = </span><span class="s4">3.141</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s2">, </span><span class="s4">3.141</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v.x = </span><span class="s3">&quot;spam&quot;</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s2">def </span><span class="s1">testSequence(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">Vector2()[:]</span>
        <span class="s1">self.assertEqual(len(v)</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s2">, lambda </span><span class="s1">: v[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s2">, lambda </span><span class="s1">: v[-</span><span class="s4">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">1</span><span class="s1">:]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(list(v)</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(tuple(v)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">))</span>
        <span class="s1">v[</span><span class="s4">0</span><span class="s1">] = </span><span class="s4">5.6</span>
        <span class="s1">v[</span><span class="s4">1</span><span class="s1">] = </span><span class="s4">7.8</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">7.8</span><span class="s1">)</span>
        <span class="s1">v[:] = [</span><span class="s4">9.1</span><span class="s2">, </span><span class="s4">11.12</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">9.1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">11.12</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">overpopulate():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[:] = [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">overpopulate)</span>
        <span class="s2">def </span><span class="s1">underpopulate():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[:] = [</span><span class="s4">1</span><span class="s1">]</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">underpopulate)</span>
        <span class="s2">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[</span><span class="s4">0</span><span class="s1">] = </span><span class="s3">&quot;spam&quot;</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s2">def </span><span class="s1">testExtendedSlicing(self):</span>
        <span class="s0">#  deletion</span>
        <span class="s2">def </span><span class="s1">delSlice(vec</span><span class="s2">, </span><span class="s1">start=</span><span class="s2">None, </span><span class="s1">stop=</span><span class="s2">None, </span><span class="s1">step=</span><span class="s2">None</span><span class="s1">):</span>
            <span class="s2">if </span><span class="s1">start </span><span class="s2">is not None and </span><span class="s1">stop </span><span class="s2">is not None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[start:stop:step]</span>
            <span class="s2">elif </span><span class="s1">start </span><span class="s2">is not None and </span><span class="s1">stop </span><span class="s2">is None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[start::step]</span>
            <span class="s2">elif </span><span class="s1">start </span><span class="s2">is None and </span><span class="s1">stop </span><span class="s2">is None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[::step]</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, None, None, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, None, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

        <span class="s0">#  assignment</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::</span><span class="s4">2</span><span class="s1">] = [-</span><span class="s4">1</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">self.v1.y])</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::-</span><span class="s4">2</span><span class="s1">] = [</span><span class="s4">10</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[self.v1.x</span><span class="s2">, </span><span class="s4">10</span><span class="s1">])</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::-</span><span class="s4">1</span><span class="s1">] = v</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.x])</span>
        <span class="s1">a = Vector2(self.v1)</span>
        <span class="s1">b = Vector2(self.v1)</span>
        <span class="s1">c = Vector2(self.v1)</span>
        <span class="s1">a[</span><span class="s4">1</span><span class="s1">:</span><span class="s4">2</span><span class="s1">] = [</span><span class="s4">2.2</span><span class="s1">]</span>
        <span class="s1">b[slice(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">2</span><span class="s1">)] = [</span><span class="s4">2.2</span><span class="s1">]</span>
        <span class="s1">c[</span><span class="s4">1</span><span class="s1">:</span><span class="s4">2</span><span class="s1">:] = (</span><span class="s4">2.2</span><span class="s2">,</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(a</span><span class="s2">, </span><span class="s1">b)</span>
        <span class="s1">self.assertEqual(a</span><span class="s2">, </span><span class="s1">c)</span>
        <span class="s1">self.assertEqual(type(a)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(b)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(c)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>

    <span class="s2">def </span><span class="s1">testAdd(self):</span>
        <span class="s1">v3 = self.v1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.v2.y)</span>
        <span class="s1">v3 = self.v1 + self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.t2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.t2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 + self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.l2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.l2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">v3 = self.l1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">] + self.v2.y)</span>

    <span class="s2">def </span><span class="s1">testSub(self):</span>
        <span class="s1">v3 = self.v1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.v2.y)</span>
        <span class="s1">v3 = self.v1 - self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.t2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.t2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 - self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.l2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.l2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">v3 = self.l1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">] - self.v2.y)</span>

    <span class="s2">def </span><span class="s1">testScalarMultiplication(self):</span>
        <span class="s1">v = self.s1 * self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.s1 * self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.s1 * self.v1.y)</span>
        <span class="s1">v = self.v1 * self.s2</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x * self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y * self.s2)</span>

    <span class="s2">def </span><span class="s1">testScalarDivision(self):</span>
        <span class="s1">v = self.v1 / self.s1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y / self.s1)</span>
        <span class="s1">v = self.v1 // self.s2</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x // self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y // self.s2)</span>

    <span class="s2">def </span><span class="s1">testBool(self):</span>
        <span class="s1">self.assertEqual(bool(self.zeroVec)</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(bool(self.v1)</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span><span class="s2">not </span><span class="s1">self.zeroVec)</span>
        <span class="s1">self.assertTrue(self.v1)</span>

    <span class="s2">def </span><span class="s1">testUnary(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s2">, </span><span class="s1">id(self.v1))</span>
        <span class="s1">v = -self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">-self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">-self.v1.y)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s2">, </span><span class="s1">id(self.v1))</span>

    <span class="s2">def </span><span class="s1">testCompare(self):</span>
        <span class="s1">int_vec = Vector2(</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">flt_vec = Vector2(</span><span class="s4">3.0</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2.0</span><span class="s1">)</span>
        <span class="s1">zero_vec = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == flt_vec</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != flt_vec</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != zero_vec</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(flt_vec == zero_vec</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == (</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s1">)</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != (</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s1">)</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != </span><span class="s4">5</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == </span><span class="s4">5</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, False</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testStr(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(str(v)</span><span class="s2">, </span><span class="s3">&quot;[1.2, 3.4]&quot;</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testRepr(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.__repr__()</span><span class="s2">, </span><span class="s3">&quot;&lt;Vector2(1.2, 3.4)&gt;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector2(v.__repr__()))</span>

    <span class="s2">def </span><span class="s1">testIter(self):</span>
        <span class="s1">it = self.v1.__iter__()</span>
        <span class="s2">if </span><span class="s1">PY3:</span>
            <span class="s1">next_ = it.__next__</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s1">next_ = it.next</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(StopIteration</span><span class="s2">, lambda </span><span class="s1">: next_())</span>
        <span class="s1">it1 = self.v1.__iter__()</span>
        <span class="s1">it2 = self.v1.__iter__()</span>
        <span class="s1">self.assertNotEqual(id(it1)</span><span class="s2">, </span><span class="s1">id(it2))</span>
        <span class="s1">self.assertEqual(id(it1)</span><span class="s2">, </span><span class="s1">id(it1.__iter__()))</span>
        <span class="s1">self.assertEqual(list(it1)</span><span class="s2">, </span><span class="s1">list(it2));</span>
        <span class="s1">self.assertEqual(list(self.v1.__iter__())</span><span class="s2">, </span><span class="s1">self.l1)</span>
        <span class="s1">idx = </span><span class="s4">0</span>
        <span class="s2">for </span><span class="s1">val </span><span class="s2">in </span><span class="s1">self.v1:</span>
            <span class="s1">self.assertEqual(val</span><span class="s2">, </span><span class="s1">self.v1[idx])</span>
            <span class="s1">idx += </span><span class="s4">1</span>

    <span class="s2">def </span><span class="s1">test_rotate(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate(</span><span class="s4">90 </span><span class="s1">+ </span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">v1 = Vector2(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s0"># issue 214</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">).rotate(</span><span class="s4">359.99999999</span><span class="s1">)</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_rotate_ip(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_ip(</span><span class="s4">90</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v = Vector2(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_ip(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_normalize(self):</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s0"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># v1 is unchanged</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s0"># v2 is paralell to v1</span>
        <span class="s1">self.assertAlmostEqual(self.v1.x * v.y - self.v1.y * v.x</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.normalize())</span>

    <span class="s2">def </span><span class="s1">test_normalize_ip(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s0"># v has length != 1 before normalizing</span>
        <span class="s1">self.assertNotEqual(v.x * v.x + v.y * v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># inplace operations should return None</span>
        <span class="s1">self.assertEqual(v.normalize_ip()</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s0"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># v2 is paralell to v1</span>
        <span class="s1">self.assertAlmostEqual(self.v1.x * v.y - self.v1.y * v.x</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.normalize_ip())</span>

    <span class="s2">def </span><span class="s1">test_is_normalized(self):</span>
        <span class="s1">self.assertEqual(self.v1.is_normalized()</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s1">self.assertEqual(v.is_normalized()</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e2.is_normalized()</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.is_normalized()</span><span class="s2">, False</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_cross(self):</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s2">,</span>
                         <span class="s1">self.v1.x * self.v2.y - self.v1.y * self.v2.x)</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.l2)</span><span class="s2">,</span>
                         <span class="s1">self.v1.x * self.l2[</span><span class="s4">1</span><span class="s1">] - self.v1.y * self.l2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.t2)</span><span class="s2">,</span>
                         <span class="s1">self.v1.x * self.t2[</span><span class="s4">1</span><span class="s1">] - self.v1.y * self.t2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s2">, </span><span class="s1">-self.v2.cross(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v1)</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_dot(self):</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s2">,</span>
                            <span class="s1">self.v1.x * self.v2.x + self.v1.y * self.v2.y)</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.l2)</span><span class="s2">,</span>
                            <span class="s1">self.v1.x * self.l2[</span><span class="s4">0</span><span class="s1">] + self.v1.y * self.l2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.t2)</span><span class="s2">,</span>
                            <span class="s1">self.v1.x * self.t2[</span><span class="s4">0</span><span class="s1">] + self.v1.y * self.t2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.dot(self.v2)</span><span class="s2">, </span><span class="s1">self.v2.dot(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.dot(self.v2)</span><span class="s2">, </span><span class="s1">self.v1 * self.v2)</span>

    <span class="s2">def </span><span class="s1">test_angle_to(self):</span>
        <span class="s1">self.assertEqual(self.v1.rotate(self.v1.angle_to(self.v2)).normalize()</span><span class="s2">,</span>
                         <span class="s1">self.v2.normalize())</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span><span class="s2">, </span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((</span><span class="s4">0</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">))</span><span class="s2">, </span><span class="s1">-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span><span class="s2">, </span><span class="s4">135</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(abs(Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)))</span><span class="s2">, </span><span class="s4">180</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_scale_to_length(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.scale_to_length(</span><span class="s4">2.5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">2.5</span><span class="s2">, </span><span class="s4">2.5</span><span class="s1">) / math.sqrt(</span><span class="s4">2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.scale_to_length(</span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.scale_to_length(</span><span class="s4">0</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">self.zeroVec)</span>

    <span class="s2">def </span><span class="s1">test_length(self):</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">).length()</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(-</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">).length()</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length()</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_length_squared(self):</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">).length_squared()</span><span class="s2">, </span><span class="s4">25</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(-</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">).length_squared()</span><span class="s2">, </span><span class="s4">25</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length_squared()</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_reflect(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">n = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.reflect(n)</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.reflect(</span><span class="s4">3</span><span class="s1">*n)</span><span class="s2">, </span><span class="s1">v.reflect(n))</span>
        <span class="s1">self.assertEqual(v.reflect(-v)</span><span class="s2">, </span><span class="s1">-v)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v.reflect(self.zeroVec))</span>

    <span class="s2">def </span><span class="s1">test_reflect_ip(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">n = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.reflect_ip(n)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">v2.reflect_ip(</span><span class="s4">3</span><span class="s1">*n)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">v1.reflect(n))</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">v2.reflect_ip(-v1)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v2.reflect_ip(Vector2()))</span>

    <span class="s2">def </span><span class="s1">test_distance_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_to(self.e2)</span><span class="s2">, </span><span class="s1">math.sqrt(</span><span class="s4">2</span><span class="s1">))</span>
        <span class="s1">self.assertAlmostEqual(self.v1.distance_to(self.v2)</span><span class="s2">,</span>
                            <span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v1)</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v2)</span><span class="s2">,</span>
                         <span class="s1">self.v2.distance_to(self.v1))</span>

    <span class="s2">def </span><span class="s1">test_distance_squared_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to(self.e2)</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(self.v1.distance_squared_to(self.v2)</span><span class="s2">,</span>
                            <span class="s1">diff.x * diff.x + diff.y * diff.y)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v1)</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v2)</span><span class="s2">,</span>
                         <span class="s1">self.v2.distance_squared_to(self.v1))</span>

    <span class="s2">def </span><span class="s1">test_update(self):</span>
        <span class="s1">v = Vector2(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">)</span>
        <span class="s1">v.update(</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector2((</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)))</span>
        <span class="s1">v.update(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">v.update((</span><span class="s4">4</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertNotEqual(v</span><span class="s2">, </span><span class="s1">Vector2((</span><span class="s4">5</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)))</span>

    <span class="s2">def </span><span class="s1">test_swizzle(self):</span>
        <span class="s1">self.assertTrue(hasattr(pygame.math</span><span class="s2">, </span><span class="s3">&quot;enable_swizzling&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(hasattr(pygame.math</span><span class="s2">, </span><span class="s3">&quot;disable_swizzling&quot;</span><span class="s1">))</span>
        <span class="s0"># swizzling not disabled by default</span>
        <span class="s1">pygame.math.disable_swizzling()</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, lambda </span><span class="s1">: self.v1.yx)</span>
        <span class="s1">pygame.math.enable_swizzling()</span>

        <span class="s1">self.assertEqual(self.v1.yx</span><span class="s2">, </span><span class="s1">(self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.x))</span>
        <span class="s1">self.assertEqual(self.v1.xxyyxy</span><span class="s2">, </span><span class="s1">(self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">,</span>
                                          <span class="s1">self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.y))</span>
        <span class="s1">self.v1.xy = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">self.t2)</span>
        <span class="s1">self.v1.yx = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">(self.t2[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">self.t2[</span><span class="s4">0</span><span class="s1">]))</span>
        <span class="s1">self.assertEqual(type(self.v1)</span><span class="s2">, </span><span class="s1">Vector2)</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleX():</span>
            <span class="s1">Vector2().xx = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleY():</span>
            <span class="s1">Vector2().yy = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleX)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleY)</span>
        <span class="s2">def </span><span class="s1">invalidAssignment():</span>
            <span class="s1">Vector2().xy = </span><span class="s4">3</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">invalidAssignment)</span>
        <span class="s2">def </span><span class="s1">unicodeAttribute():</span>
            <span class="s1">getattr(Vector2()</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">unicodeAttribute)</span>

    <span class="s2">def </span><span class="s1">test_swizzle_return_types(self):</span>
        <span class="s1">self.assertEqual(type(self.v1.x)</span><span class="s2">, </span><span class="s1">float)</span>
        <span class="s1">self.assertEqual(type(self.v1.xy)</span><span class="s2">, </span><span class="s1">Vector2)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyx)</span><span class="s2">, </span><span class="s1">Vector3)</span>
        <span class="s0"># but we don't have vector4 or above... so tuple.</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxy)</span><span class="s2">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxyx)</span><span class="s2">, </span><span class="s1">tuple)</span>

    <span class="s2">def </span><span class="s1">test_elementwise(self):</span>
        <span class="s0"># behaviour for &quot;elementwise op scalar&quot;</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x + self.s1</span><span class="s2">, </span><span class="s1">self.v1.y + self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() - self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x - self.s1</span><span class="s2">, </span><span class="s1">self.v1.y - self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() * self.s2</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x * self.s2</span><span class="s2">, </span><span class="s1">self.v1.y * self.s2))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() / self.s2</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x / self.s2</span><span class="s2">, </span><span class="s1">self.v1.y / self.s2))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() // self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x // self.s1</span><span class="s2">, </span><span class="s1">self.v1.y // self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() ** self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x ** self.s1</span><span class="s2">, </span><span class="s1">self.v1.y ** self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() % self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x % self.s1</span><span class="s2">, </span><span class="s1">self.v1.y % self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt; self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &gt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &gt; self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt; self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &lt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &lt; self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() == self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x == self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y == self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() != self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x != self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y != self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt;= self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &gt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &gt;= self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt;= self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &lt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &lt;= self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() != self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x != self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y != self.s1)</span>
        <span class="s0"># behaviour for &quot;scalar op elementwise&quot;</span>
        <span class="s1">self.assertEqual(</span><span class="s4">5 </span><span class="s1">+ self.v1.elementwise()</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">) + self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">3.5 </span><span class="s1">- self.v1.elementwise()</span><span class="s2">, </span><span class="s1">Vector2(</span><span class="s4">3.5</span><span class="s2">, </span><span class="s4">3.5</span><span class="s1">) - self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">7.5 </span><span class="s1">* self.v1.elementwise() </span><span class="s2">, </span><span class="s4">7.5 </span><span class="s1">* self.v1)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.y))</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">// self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">// self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">// self.v1.y))</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">** self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">** self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">** self.v1.y))</span>
        <span class="s1">self.assertEqual(</span><span class="s4">3 </span><span class="s1">% self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">3 </span><span class="s1">% self.v1.x</span><span class="s2">, </span><span class="s4">3 </span><span class="s1">% self.v1.y))</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&lt; self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&lt; self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt; self.v1.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&gt; self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&gt; self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&gt; self.v1.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">1 </span><span class="s1">== self.v1.elementwise()</span><span class="s2">, </span><span class="s4">1 </span><span class="s1">== self.v1.x </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">== self.v1.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">1 </span><span class="s1">!= self.v1.elementwise()</span><span class="s2">, </span><span class="s4">1 </span><span class="s1">!= self.v1.x </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">!= self.v1.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&lt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&lt;= self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.x </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">7 </span><span class="s1">!= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">!= self.v1.x </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">!= self.v1.y)</span>

        <span class="s0"># behaviour for &quot;elementwise op vector&quot;</span>
        <span class="s1">self.assertEqual(type(self.v1.elementwise() * self.v2)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s2">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s2">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() - self.v2</span><span class="s2">, </span><span class="s1">self.v1 - self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() * self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x * self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y * self.v2.y))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() / self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x / self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y / self.v2.y))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() // self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x // self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y // self.v2.y))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() ** self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x ** self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y ** self.v2.y))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() % self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x % self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y % self.v2.y))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt; self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &gt; self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &gt; self.v2.y)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt; self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &lt; self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &lt; self.v2.y)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt;= self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &gt;= self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &gt;= self.v2.y)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt;= self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &lt;= self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &lt;= self.v2.y)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() == self.v2</span><span class="s2">, </span><span class="s1">self.v1.x == self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y == self.v2.y)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() != self.v2</span><span class="s2">, </span><span class="s1">self.v1.x != self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y != self.v2.y)</span>
        <span class="s0"># behaviour for &quot;vector op elementwise&quot;</span>
        <span class="s1">self.assertEqual(self.v2 + self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 + self.v1)</span>
        <span class="s1">self.assertEqual(self.v2 - self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 - self.v1)</span>
        <span class="s1">self.assertEqual(self.v2 * self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x * self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y * self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2 / self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x / self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y / self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2 // self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x // self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y // self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2 ** self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x ** self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y ** self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2 % self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x % self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y % self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2 &lt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt; self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2 &gt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt; self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2 &lt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2 &gt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2 == self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x == self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y == self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2 != self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x != self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y != self.v1.y)</span>

        <span class="s0"># behaviour for &quot;elementwise op elementwise&quot;</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() + self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 + self.v1)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() - self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 - self.v1)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() * self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x * self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y * self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() / self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x / self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y / self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() // self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x // self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y // self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() ** self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x ** self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y ** self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() % self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x % self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y % self.v1.y))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &lt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt; self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &gt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt; self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &lt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &gt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt;= self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() == self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x == self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y == self.v1.y)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() != self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x != self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y != self.v1.y)</span>

        <span class="s0"># other behaviour</span>
        <span class="s1">self.assertEqual(abs(self.v1.elementwise())</span><span class="s2">, </span><span class="s1">(abs(self.v1.x)</span><span class="s2">, </span><span class="s1">abs(self.v1.y)))</span>
        <span class="s1">self.assertEqual(-self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-self.v1)</span>
        <span class="s1">self.assertEqual(+self.v1.elementwise()</span><span class="s2">, </span><span class="s1">+self.v1)</span>
        <span class="s1">self.assertEqual(bool(self.v1.elementwise())</span><span class="s2">, </span><span class="s1">bool(self.v1))</span>
        <span class="s1">self.assertEqual(bool(Vector2().elementwise())</span><span class="s2">, </span><span class="s1">bool(Vector2()))</span>
        <span class="s1">self.assertEqual(self.zeroVec.elementwise() ** </span><span class="s4">0</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: pow(Vector2(-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).elementwise()</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_elementwise(self):</span>
        <span class="s1">v1 = self.v1</span>
        <span class="s1">v2 = self.v2</span>
        <span class="s1">s1 = self.s1</span>
        <span class="s1">s2 = self.s2</span>
        <span class="s0"># behaviour for &quot;elementwise op scalar&quot;</span>
        <span class="s1">self.assertEqual(v1.elementwise() + s1</span><span class="s2">, </span><span class="s1">(v1.x + s1</span><span class="s2">, </span><span class="s1">v1.y + s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() - s1</span><span class="s2">, </span><span class="s1">(v1.x - s1</span><span class="s2">, </span><span class="s1">v1.y - s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() * s2</span><span class="s2">, </span><span class="s1">(v1.x * s2</span><span class="s2">, </span><span class="s1">v1.y * s2))</span>
        <span class="s1">self.assertEqual(v1.elementwise() / s2</span><span class="s2">, </span><span class="s1">(v1.x / s2</span><span class="s2">, </span><span class="s1">v1.y / s2))</span>
        <span class="s1">self.assertEqual(v1.elementwise() // s1</span><span class="s2">, </span><span class="s1">(v1.x // s1</span><span class="s2">, </span><span class="s1">v1.y // s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() ** s1</span><span class="s2">, </span><span class="s1">(v1.x ** s1</span><span class="s2">, </span><span class="s1">v1.y ** s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() % s1</span><span class="s2">, </span><span class="s1">(v1.x % s1</span><span class="s2">, </span><span class="s1">v1.y % s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt; s1</span><span class="s2">, </span><span class="s1">v1.x &gt; s1 </span><span class="s2">and </span><span class="s1">v1.y &gt; s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt; s1</span><span class="s2">, </span><span class="s1">v1.x &lt; s1 </span><span class="s2">and </span><span class="s1">v1.y &lt; s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() == s1</span><span class="s2">, </span><span class="s1">v1.x == s1 </span><span class="s2">and </span><span class="s1">v1.y == s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != s1</span><span class="s2">, </span><span class="s1">v1.x != s1 </span><span class="s2">and </span><span class="s1">v1.y != s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt;= s1</span><span class="s2">, </span><span class="s1">v1.x &gt;= s1 </span><span class="s2">and </span><span class="s1">v1.y &gt;= s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt;= s1</span><span class="s2">, </span><span class="s1">v1.x &lt;= s1 </span><span class="s2">and </span><span class="s1">v1.y &lt;= s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != s1</span><span class="s2">, </span><span class="s1">v1.x != s1 </span><span class="s2">and </span><span class="s1">v1.y != s1)</span>
        <span class="s0"># behaviour for &quot;scalar op elementwise&quot;</span>
        <span class="s1">self.assertEqual(s1 + v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 + v1.x</span><span class="s2">, </span><span class="s1">s1 + v1.y))</span>
        <span class="s1">self.assertEqual(s1 - v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 - v1.x</span><span class="s2">, </span><span class="s1">s1 - v1.y))</span>
        <span class="s1">self.assertEqual(s1 * v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 * v1.x</span><span class="s2">, </span><span class="s1">s1 * v1.y))</span>
        <span class="s1">self.assertEqual(s1 / v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 / v1.x</span><span class="s2">, </span><span class="s1">s1 / v1.y))</span>
        <span class="s1">self.assertEqual(s1 // v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 // v1.x</span><span class="s2">, </span><span class="s1">s1 // v1.y))</span>
        <span class="s1">self.assertEqual(s1 ** v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 ** v1.x</span><span class="s2">, </span><span class="s1">s1 ** v1.y))</span>
        <span class="s1">self.assertEqual(s1 % v1.elementwise()</span><span class="s2">, </span><span class="s1">(s1 % v1.x</span><span class="s2">, </span><span class="s1">s1 % v1.y))</span>
        <span class="s1">self.assertEqual(s1 &lt; v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 &lt; v1.x </span><span class="s2">and </span><span class="s1">s1 &lt; v1.y)</span>
        <span class="s1">self.assertEqual(s1 &gt; v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 &gt; v1.x </span><span class="s2">and </span><span class="s1">s1 &gt; v1.y)</span>
        <span class="s1">self.assertEqual(s1 == v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 == v1.x </span><span class="s2">and </span><span class="s1">s1 == v1.y)</span>
        <span class="s1">self.assertEqual(s1 != v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 != v1.x </span><span class="s2">and </span><span class="s1">s1 != v1.y)</span>
        <span class="s1">self.assertEqual(s1 &lt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 &lt;= v1.x </span><span class="s2">and </span><span class="s1">s1 &lt;= v1.y)</span>
        <span class="s1">self.assertEqual(s1 &gt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 &gt;= v1.x </span><span class="s2">and </span><span class="s1">s1 &gt;= v1.y)</span>
        <span class="s1">self.assertEqual(s1 != v1.elementwise()</span><span class="s2">, </span><span class="s1">s1 != v1.x </span><span class="s2">and </span><span class="s1">s1 != v1.y)</span>

        <span class="s0"># behaviour for &quot;elementwise op vector&quot;</span>
        <span class="s1">self.assertEqual(type(v1.elementwise() * v2)</span><span class="s2">, </span><span class="s1">type(v1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() + v2</span><span class="s2">, </span><span class="s1">v1 + v2)</span>
        <span class="s1">self.assertEqual(v1.elementwise() - v2</span><span class="s2">, </span><span class="s1">v1 - v2)</span>
        <span class="s1">self.assertEqual(v1.elementwise() * v2</span><span class="s2">, </span><span class="s1">(v1.x * v2.x</span><span class="s2">, </span><span class="s1">v1.y * v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() / v2</span><span class="s2">, </span><span class="s1">(v1.x / v2.x</span><span class="s2">, </span><span class="s1">v1.y / v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() // v2</span><span class="s2">, </span><span class="s1">(v1.x // v2.x</span><span class="s2">, </span><span class="s1">v1.y // v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() ** v2</span><span class="s2">, </span><span class="s1">(v1.x ** v2.x</span><span class="s2">, </span><span class="s1">v1.y ** v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() % v2</span><span class="s2">, </span><span class="s1">(v1.x % v2.x</span><span class="s2">, </span><span class="s1">v1.y % v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt; v2</span><span class="s2">, </span><span class="s1">v1.x &gt; v2.x </span><span class="s2">and </span><span class="s1">v1.y &gt; v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt; v2</span><span class="s2">, </span><span class="s1">v1.x &lt; v2.x </span><span class="s2">and </span><span class="s1">v1.y &lt; v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt;= v2</span><span class="s2">, </span><span class="s1">v1.x &gt;= v2.x </span><span class="s2">and </span><span class="s1">v1.y &gt;= v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt;= v2</span><span class="s2">, </span><span class="s1">v1.x &lt;= v2.x </span><span class="s2">and </span><span class="s1">v1.y &lt;= v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() == v2</span><span class="s2">, </span><span class="s1">v1.x == v2.x </span><span class="s2">and </span><span class="s1">v1.y == v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != v2</span><span class="s2">, </span><span class="s1">v1.x != v2.x </span><span class="s2">and </span><span class="s1">v1.y != v2.y)</span>
        <span class="s0"># behaviour for &quot;vector op elementwise&quot;</span>
        <span class="s1">self.assertEqual(v2 + v1.elementwise()</span><span class="s2">, </span><span class="s1">v2 + v1)</span>
        <span class="s1">self.assertEqual(v2 - v1.elementwise()</span><span class="s2">, </span><span class="s1">v2 - v1)</span>
        <span class="s1">self.assertEqual(v2 * v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x * v1.x</span><span class="s2">, </span><span class="s1">v2.y * v1.y))</span>
        <span class="s1">self.assertEqual(v2 / v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x / v1.x</span><span class="s2">, </span><span class="s1">v2.y / v1.y))</span>
        <span class="s1">self.assertEqual(v2 // v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x // v1.x</span><span class="s2">, </span><span class="s1">v2.y // v1.y))</span>
        <span class="s1">self.assertEqual(v2 ** v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x ** v1.x</span><span class="s2">, </span><span class="s1">v2.y ** v1.y))</span>
        <span class="s1">self.assertEqual(v2 % v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x % v1.x</span><span class="s2">, </span><span class="s1">v2.y % v1.y))</span>
        <span class="s1">self.assertEqual(v2 &lt; v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &lt; v1.x </span><span class="s2">and </span><span class="s1">v2.y &lt; v1.y)</span>
        <span class="s1">self.assertEqual(v2 &gt; v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &gt; v1.x </span><span class="s2">and </span><span class="s1">v2.y &gt; v1.y)</span>
        <span class="s1">self.assertEqual(v2 &lt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &lt;= v1.x </span><span class="s2">and </span><span class="s1">v2.y &lt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2 &gt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &gt;= v1.x </span><span class="s2">and </span><span class="s1">v2.y &gt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2 == v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x == v1.x </span><span class="s2">and </span><span class="s1">v2.y == v1.y)</span>
        <span class="s1">self.assertEqual(v2 != v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x != v1.x </span><span class="s2">and </span><span class="s1">v2.y != v1.y)</span>

        <span class="s0"># behaviour for &quot;elementwise op elementwise&quot;</span>
        <span class="s1">self.assertEqual(v2.elementwise() + v1.elementwise()</span><span class="s2">, </span><span class="s1">v2 + v1)</span>
        <span class="s1">self.assertEqual(v2.elementwise() - v1.elementwise()</span><span class="s2">, </span><span class="s1">v2 - v1)</span>
        <span class="s1">self.assertEqual(v2.elementwise() * v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x * v1.x</span><span class="s2">, </span><span class="s1">v2.y * v1.y))</span>
        <span class="s1">self.assertEqual(v2.elementwise() / v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x / v1.x</span><span class="s2">, </span><span class="s1">v2.y / v1.y))</span>
        <span class="s1">self.assertEqual(v2.elementwise() // v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x // v1.x</span><span class="s2">, </span><span class="s1">v2.y // v1.y))</span>
        <span class="s1">self.assertEqual(v2.elementwise() ** v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x ** v1.x</span><span class="s2">, </span><span class="s1">v2.y ** v1.y))</span>
        <span class="s1">self.assertEqual(v2.elementwise() % v1.elementwise()</span><span class="s2">, </span><span class="s1">(v2.x % v1.x</span><span class="s2">, </span><span class="s1">v2.y % v1.y))</span>
        <span class="s1">self.assertEqual(v2.elementwise() &lt; v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &lt; v1.x </span><span class="s2">and </span><span class="s1">v2.y &lt; v1.y)</span>
        <span class="s1">self.assertEqual(v2.elementwise() &gt; v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &gt; v1.x </span><span class="s2">and </span><span class="s1">v2.y &gt; v1.y)</span>
        <span class="s1">self.assertEqual(v2.elementwise() &lt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &lt;= v1.x </span><span class="s2">and </span><span class="s1">v2.y &lt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2.elementwise() &gt;= v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x &gt;= v1.x </span><span class="s2">and </span><span class="s1">v2.y &gt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2.elementwise() == v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x == v1.x </span><span class="s2">and </span><span class="s1">v2.y == v1.y)</span>
        <span class="s1">self.assertEqual(v2.elementwise() != v1.elementwise()</span><span class="s2">, </span><span class="s1">v2.x != v1.x </span><span class="s2">and </span><span class="s1">v2.y != v1.y)</span>

        <span class="s0"># other behaviour</span>
        <span class="s1">self.assertEqual(abs(v1.elementwise())</span><span class="s2">, </span><span class="s1">(abs(v1.x)</span><span class="s2">, </span><span class="s1">abs(v1.y)))</span>
        <span class="s1">self.assertEqual(-v1.elementwise()</span><span class="s2">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertEqual(+v1.elementwise()</span><span class="s2">, </span><span class="s1">+v1)</span>
        <span class="s1">self.assertEqual(bool(v1.elementwise())</span><span class="s2">, </span><span class="s1">bool(v1))</span>
        <span class="s1">self.assertEqual(bool(Vector2().elementwise())</span><span class="s2">, </span><span class="s1">bool(Vector2()))</span>
        <span class="s1">self.assertEqual(self.zeroVec.elementwise() ** </span><span class="s4">0</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: pow(Vector2(-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).elementwise()</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() / </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() // </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() % </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() / self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() // self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector2(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() % self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">/ self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">// self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">% self.zeroVec.elementwise())</span>

    <span class="s2">def </span><span class="s1">test_slerp(self):</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.slerp(self.v1</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.v1.slerp(self.zeroVec</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">,</span>
                          <span class="s2">lambda </span><span class="s1">: self.zeroVec.slerp(self.zeroVec</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">v1 = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">steps = </span><span class="s4">10</span>
        <span class="s1">angle_step = v1.angle_to(v2) / steps</span>
        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">u </span><span class="s2">in </span><span class="s1">((i</span><span class="s2">, </span><span class="s1">v1.slerp(v2</span><span class="s2">, </span><span class="s1">i/float(steps))) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">range(steps+</span><span class="s4">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
            <span class="s1">self.assertAlmostEqual(v1.angle_to(u)</span><span class="s2">, </span><span class="s1">i * angle_step)</span>
        <span class="s1">self.assertEqual(u</span><span class="s2">, </span><span class="s1">v2)</span>

        <span class="s1">v1 = Vector2(</span><span class="s4">100</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">radial_factor = v2.length() / v1.length()</span>
        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">u </span><span class="s2">in </span><span class="s1">((i</span><span class="s2">, </span><span class="s1">v1.slerp(v2</span><span class="s2">, </span><span class="s1">-i/float(steps))) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">range(steps+</span><span class="s4">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s2">, </span><span class="s1">(v2.length() - v1.length()) * (float(i)/steps) + v1.length())</span>
        <span class="s1">self.assertEqual(u</span><span class="s2">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1.slerp(v1</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">v1)</span>
        <span class="s1">self.assertEqual(v2.slerp(v2</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v1.slerp(-v1</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_lerp(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v1.lerp(v2</span><span class="s2">, </span><span class="s4">2.5</span><span class="s1">))</span>

        <span class="s1">v1 = Vector2(-</span><span class="s4">10</span><span class="s2">, </span><span class="s1">-</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">2.5</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_polar(self):</span>
        <span class="s1">v = Vector2()</span>
        <span class="s1">v.from_polar(self.v1.as_polar())</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">v)</span>
        <span class="s1">self.assertEqual(self.e1.as_polar()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e2.as_polar()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual((</span><span class="s4">2 </span><span class="s1">* self.e2).as_polar()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">2</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar((</span><span class="s2">None, None</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar(</span><span class="s3">&quot;ab&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar((</span><span class="s2">None, </span><span class="s4">1</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar((</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar((</span><span class="s4">1</span><span class="s2">,</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_polar(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">))</span>
        <span class="s1">v.from_polar((</span><span class="s4">.5</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s4">.5 </span><span class="s1">* self.e2)</span>
        <span class="s1">v.from_polar((</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">self.e1)</span>

    <span class="s2">def </span><span class="s1">test_subclass_operation(self):</span>
        <span class="s2">class </span><span class="s1">Vector(pygame.math.Vector2):</span>
            <span class="s2">pass</span>

        <span class="s1">vec = Vector()</span>

        <span class="s1">vec_a = Vector(</span><span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">vec_b = Vector(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

        <span class="s1">vec_a + vec_b</span>
        <span class="s1">vec_a *= </span><span class="s4">2</span>



<span class="s2">class </span><span class="s1">Vector3TypeTest(unittest.TestCase):</span>

    <span class="s2">def </span><span class="s1">setUp(self):</span>
        <span class="s1">self.zeroVec = Vector3()</span>
        <span class="s1">self.e1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.e2 = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.e3 = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.t1 = (</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.l1 = list(self.t1)</span>
        <span class="s1">self.v1 = Vector3(self.t1)</span>
        <span class="s1">self.t2 = (</span><span class="s4">5.6</span><span class="s2">, </span><span class="s4">7.8</span><span class="s2">, </span><span class="s4">2.1</span><span class="s1">)</span>
        <span class="s1">self.l2 = list(self.t2)</span>
        <span class="s1">self.v2 = Vector3(self.t2)</span>
        <span class="s1">self.s1 = </span><span class="s4">5.6</span>
        <span class="s1">self.s2 = </span><span class="s4">7.8</span>

    <span class="s2">def </span><span class="s1">testConstructionDefault(self):</span>
        <span class="s1">v = Vector3()</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionXYZ(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">9.6</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionTuple(self):</span>
        <span class="s1">v = Vector3((</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s4">9.6</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">9.6</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionList(self):</span>
        <span class="s1">v = Vector3([</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionVector3(self):</span>
        <span class="s1">v = Vector3(Vector3(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionScalar(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionScalarKeywords(self):</span>
        <span class="s1">v = Vector3(x=</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionKeywords(self):</span>
        <span class="s1">v = Vector3(x=</span><span class="s4">1</span><span class="s2">, </span><span class="s1">y=</span><span class="s4">2</span><span class="s2">, </span><span class="s1">z=</span><span class="s4">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">2.</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">3.</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testConstructionMissing(self):</span>
        <span class="s2">def </span><span class="s1">assign_missing_value():</span>
            <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">assign_missing_value)</span>

        <span class="s2">def </span><span class="s1">assign_missing_value():</span>
            <span class="s1">v = Vector3(x=</span><span class="s4">1</span><span class="s2">, </span><span class="s1">y=</span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">assign_missing_value)</span>

    <span class="s2">def </span><span class="s1">testAttributAccess(self):</span>
        <span class="s1">tmp = self.v1.x</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.y</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.z</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1.z)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">self.v1.x = </span><span class="s4">3.141</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s2">, </span><span class="s4">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.y = </span><span class="s4">3.141</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s2">, </span><span class="s4">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.z = </span><span class="s4">3.141</span>
        <span class="s1">self.assertEqual(self.v1.z</span><span class="s2">, </span><span class="s4">3.141</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v.x = </span><span class="s3">&quot;spam&quot;</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s2">def </span><span class="s1">testSequence(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(len(v)</span><span class="s2">, </span><span class="s4">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s2">, lambda </span><span class="s1">: v[</span><span class="s4">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s4">3</span><span class="s1">]</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s2">, lambda </span><span class="s1">: v[-</span><span class="s4">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">1</span><span class="s1">:]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:-</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s4">1</span><span class="s1">:</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(list(v)</span><span class="s2">, </span><span class="s1">[</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(tuple(v)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">))</span>
        <span class="s1">v[</span><span class="s4">0</span><span class="s1">] = </span><span class="s4">5.6</span>
        <span class="s1">v[</span><span class="s4">1</span><span class="s1">] = </span><span class="s4">7.8</span>
        <span class="s1">v[</span><span class="s4">2</span><span class="s1">] = -</span><span class="s4">2.1</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">7.8</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2.1</span><span class="s1">)</span>
        <span class="s1">v[:] = [</span><span class="s4">9.1</span><span class="s2">, </span><span class="s4">11.12</span><span class="s2">, </span><span class="s1">-</span><span class="s4">13.41</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">9.1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">11.12</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">13.41</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">overpopulate():</span>
            <span class="s1">v = Vector3()</span>
            <span class="s1">v[:] = [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">]</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">overpopulate)</span>
        <span class="s2">def </span><span class="s1">underpopulate():</span>
            <span class="s1">v = Vector3()</span>
            <span class="s1">v[:] = [</span><span class="s4">1</span><span class="s1">]</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, </span><span class="s1">underpopulate)</span>
        <span class="s2">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[</span><span class="s4">0</span><span class="s1">] = </span><span class="s3">&quot;spam&quot;</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s2">def </span><span class="s1">testExtendedSlicing(self):</span>
        <span class="s0">#  deletion</span>
        <span class="s2">def </span><span class="s1">delSlice(vec</span><span class="s2">, </span><span class="s1">start=</span><span class="s2">None, </span><span class="s1">stop=</span><span class="s2">None, </span><span class="s1">step=</span><span class="s2">None</span><span class="s1">):</span>
            <span class="s2">if </span><span class="s1">start </span><span class="s2">is not None and </span><span class="s1">stop </span><span class="s2">is not None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[start:stop:step]</span>
            <span class="s2">elif </span><span class="s1">start </span><span class="s2">is not None and </span><span class="s1">stop </span><span class="s2">is None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[start::step]</span>
            <span class="s2">elif </span><span class="s1">start </span><span class="s2">is None and </span><span class="s1">stop </span><span class="s2">is None and </span><span class="s1">step </span><span class="s2">is not None</span><span class="s1">:</span>
                <span class="s2">del </span><span class="s1">vec[::step]</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, None, None, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, None, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">delSlice</span><span class="s2">, </span><span class="s1">v</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

        <span class="s0">#  assignment</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::</span><span class="s4">2</span><span class="s1">] = [-</span><span class="s4">1.1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2.2</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[-</span><span class="s4">1.1</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2.2</span><span class="s1">])</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::-</span><span class="s4">2</span><span class="s1">] = [</span><span class="s4">10</span><span class="s2">, </span><span class="s4">20</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[</span><span class="s4">20</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">, </span><span class="s4">10</span><span class="s1">])</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::-</span><span class="s4">1</span><span class="s1">] = v</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">[self.v1.z</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.x])</span>
        <span class="s1">a = Vector3(self.v1)</span>
        <span class="s1">b = Vector3(self.v1)</span>
        <span class="s1">c = Vector3(self.v1)</span>
        <span class="s1">a[</span><span class="s4">1</span><span class="s1">:</span><span class="s4">2</span><span class="s1">] = [</span><span class="s4">2.2</span><span class="s1">]</span>
        <span class="s1">b[slice(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">2</span><span class="s1">)] = [</span><span class="s4">2.2</span><span class="s1">]</span>
        <span class="s1">c[</span><span class="s4">1</span><span class="s1">:</span><span class="s4">2</span><span class="s1">:] = (</span><span class="s4">2.2</span><span class="s2">,</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(a</span><span class="s2">, </span><span class="s1">b)</span>
        <span class="s1">self.assertEqual(a</span><span class="s2">, </span><span class="s1">c)</span>
        <span class="s1">self.assertEqual(type(a)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(b)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(c)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>

    <span class="s2">def </span><span class="s1">testAdd(self):</span>
        <span class="s1">v3 = self.v1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z + self.v2.z)</span>
        <span class="s1">v3 = self.v1 + self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.t2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.t2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z + self.t2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 + self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x + self.l2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y + self.l2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z + self.l2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">2</span><span class="s1">] + self.v2.z)</span>
        <span class="s1">v3 = self.l1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">2</span><span class="s1">] + self.v2.z)</span>

    <span class="s2">def </span><span class="s1">testSub(self):</span>
        <span class="s1">v3 = self.v1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z - self.v2.z)</span>
        <span class="s1">v3 = self.v1 - self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.t2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.t2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z - self.t2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 - self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.v1.x - self.l2[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.v1.y - self.l2[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.v1.z - self.l2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.t1[</span><span class="s4">2</span><span class="s1">] - self.v2.z)</span>
        <span class="s1">v3 = self.l1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">2</span><span class="s1">] - self.v2.z)</span>

    <span class="s2">def </span><span class="s1">testScalarMultiplication(self):</span>
        <span class="s1">v = self.s1 * self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.s1 * self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.s1 * self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">self.s1 * self.v1.z)</span>
        <span class="s1">v = self.v1 * self.s2</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x * self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y * self.s2)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">self.v1.z * self.s2)</span>

    <span class="s2">def </span><span class="s1">testScalarDivision(self):</span>
        <span class="s1">v = self.v1 / self.s1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s2">, </span><span class="s1">self.v1.z / self.s1)</span>
        <span class="s1">v = self.v1 // self.s2</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x // self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y // self.s2)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">self.v1.z // self.s2)</span>

    <span class="s2">def </span><span class="s1">testBool(self):</span>
        <span class="s1">self.assertEqual(bool(self.zeroVec)</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(bool(self.v1)</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span><span class="s2">not </span><span class="s1">self.zeroVec)</span>
        <span class="s1">self.assertTrue(self.v1)</span>

    <span class="s2">def </span><span class="s1">testUnary(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">self.v1.z)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s2">, </span><span class="s1">id(self.v1))</span>
        <span class="s1">v = -self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s2">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">-self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">-self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-self.v1.z)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s2">, </span><span class="s1">id(self.v1))</span>

    <span class="s2">def </span><span class="s1">testCompare(self):</span>
        <span class="s1">int_vec = Vector3(</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">13</span><span class="s1">)</span>
        <span class="s1">flt_vec = Vector3(</span><span class="s4">3.0</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2.0</span><span class="s2">, </span><span class="s4">13.</span><span class="s1">)</span>
        <span class="s1">zero_vec = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == flt_vec</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != flt_vec</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != zero_vec</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(flt_vec == zero_vec</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == (</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">13</span><span class="s1">)</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != (</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">13</span><span class="s1">)</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != </span><span class="s4">5</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == </span><span class="s4">5</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">]</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s4">3</span><span class="s2">, </span><span class="s1">-</span><span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">]</span><span class="s2">, False</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testStr(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s4">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(str(v)</span><span class="s2">, </span><span class="s3">&quot;[1.2, 3.4, 5.6]&quot;</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">testRepr(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1.2</span><span class="s2">, </span><span class="s4">3.4</span><span class="s2">, </span><span class="s1">-</span><span class="s4">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.__repr__()</span><span class="s2">, </span><span class="s3">&quot;&lt;Vector3(1.2, 3.4, -9.6)&gt;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector3(v.__repr__()))</span>

    <span class="s2">def </span><span class="s1">testIter(self):</span>
        <span class="s1">it = self.v1.__iter__()</span>
        <span class="s2">if </span><span class="s1">PY3:</span>
            <span class="s1">next_ = it.__next__</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s1">next_ = it.next</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s2">, </span><span class="s1">self.v1[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(StopIteration</span><span class="s2">, lambda </span><span class="s1">: next_())</span>
        <span class="s1">it1 = self.v1.__iter__()</span>
        <span class="s1">it2 = self.v1.__iter__()</span>
        <span class="s1">self.assertNotEqual(id(it1)</span><span class="s2">, </span><span class="s1">id(it2))</span>
        <span class="s1">self.assertEqual(id(it1)</span><span class="s2">, </span><span class="s1">id(it1.__iter__()))</span>
        <span class="s1">self.assertEqual(list(it1)</span><span class="s2">, </span><span class="s1">list(it2));</span>
        <span class="s1">self.assertEqual(list(self.v1.__iter__())</span><span class="s2">, </span><span class="s1">self.l1)</span>
        <span class="s1">idx = </span><span class="s4">0</span>
        <span class="s2">for </span><span class="s1">val </span><span class="s2">in </span><span class="s1">self.v1:</span>
            <span class="s1">self.assertEqual(val</span><span class="s2">, </span><span class="s1">self.v1[idx])</span>
            <span class="s1">idx += </span><span class="s4">1</span>

    <span class="s2">def </span><span class="s1">test_rotate(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">axis = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">90</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">v3 = v1.rotate(</span><span class="s4">90 </span><span class="s1">+ </span><span class="s4">360</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(-</span><span class="s4">90</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">360</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s4">0</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s0"># issue 214</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).rotate(</span><span class="s4">359.9999999</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span><span class="s2">,</span>
                         <span class="s1">Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_rotate_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">axis = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_ip(</span><span class="s4">90</span><span class="s2">, </span><span class="s1">axis)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_ip(-</span><span class="s4">90</span><span class="s2">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_rotate_x(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_x(</span><span class="s4">90 </span><span class="s1">+ </span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>

    <span class="s2">def </span><span class="s1">test_rotate_x_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_x_ip(</span><span class="s4">90</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_x_ip(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_rotate_y(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_y(</span><span class="s4">90 </span><span class="s1">+ </span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v3.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v3.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>

    <span class="s2">def </span><span class="s1">test_rotate_y_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_y_ip(</span><span class="s4">90</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_y_ip(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_rotate_z(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_z(</span><span class="s4">90 </span><span class="s1">+ </span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v3.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v3.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s4">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s2">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s2">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s2">, </span><span class="s1">v2.z)</span>

    <span class="s2">def </span><span class="s1">test_rotate_z_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_z_ip(</span><span class="s4">90</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_z_ip(-</span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_normalize(self):</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s0"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># v1 is unchanged</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.z</span><span class="s2">, </span><span class="s1">self.l1[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s0"># v2 is paralell to v1 (tested via cross product)</span>
        <span class="s1">cross = ((self.v1.y * v.z - self.v1.z * v.y) ** </span><span class="s4">2 </span><span class="s1">+</span>
                 <span class="s1">(self.v1.z * v.x - self.v1.x * v.z) ** </span><span class="s4">2 </span><span class="s1">+</span>
                 <span class="s1">(self.v1.x * v.y - self.v1.y * v.x) ** </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(cross</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.normalize())</span>

    <span class="s2">def </span><span class="s1">test_normalize_ip(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s0"># v has length != 1 before normalizing</span>
        <span class="s1">self.assertNotEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># inplace operations should return None</span>
        <span class="s1">self.assertEqual(v.normalize_ip()</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s0"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s2">, </span><span class="s4">1.</span><span class="s1">)</span>
        <span class="s0"># v2 is paralell to v1 (tested via cross product)</span>
        <span class="s1">cross = ((self.v1.y * v.z - self.v1.z * v.y) ** </span><span class="s4">2 </span><span class="s1">+</span>
                 <span class="s1">(self.v1.z * v.x - self.v1.x * v.z) ** </span><span class="s4">2 </span><span class="s1">+</span>
                 <span class="s1">(self.v1.x * v.y - self.v1.y * v.x) ** </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(cross</span><span class="s2">, </span><span class="s4">0.</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.normalize_ip())</span>

    <span class="s2">def </span><span class="s1">test_is_normalized(self):</span>
        <span class="s1">self.assertEqual(self.v1.is_normalized()</span><span class="s2">, False</span><span class="s1">)</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s1">self.assertEqual(v.is_normalized()</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e2.is_normalized()</span><span class="s2">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.is_normalized()</span><span class="s2">, False</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_cross(self):</span>
        <span class="s2">def </span><span class="s1">cross(a</span><span class="s2">, </span><span class="s1">b):</span>
            <span class="s2">return </span><span class="s1">Vector3(a[</span><span class="s4">1</span><span class="s1">] * b[</span><span class="s4">2</span><span class="s1">] - a[</span><span class="s4">2</span><span class="s1">] * b[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">,</span>
                           <span class="s1">a[</span><span class="s4">2</span><span class="s1">] * b[</span><span class="s4">0</span><span class="s1">] - a[</span><span class="s4">0</span><span class="s1">] * b[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">,</span>
                           <span class="s1">a[</span><span class="s4">0</span><span class="s1">] * b[</span><span class="s4">1</span><span class="s1">] - a[</span><span class="s4">1</span><span class="s1">] * b[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s2">, </span><span class="s1">cross(self.v1</span><span class="s2">, </span><span class="s1">self.v2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.l2)</span><span class="s2">, </span><span class="s1">cross(self.v1</span><span class="s2">, </span><span class="s1">self.l2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.t2)</span><span class="s2">, </span><span class="s1">cross(self.v1</span><span class="s2">, </span><span class="s1">self.t2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s2">, </span><span class="s1">-self.v2.cross(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v1)</span><span class="s2">, </span><span class="s1">self.zeroVec)</span>

    <span class="s2">def </span><span class="s1">test_dot(self):</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s2">,</span>
                               <span class="s1">self.v1.x * self.v2.x + self.v1.y * self.v2.y + self.v1.z * self.v2.z)</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.l2)</span><span class="s2">,</span>
                               <span class="s1">self.v1.x * self.l2[</span><span class="s4">0</span><span class="s1">] + self.v1.y * self.l2[</span><span class="s4">1</span><span class="s1">] + self.v1.z * self.l2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.t2)</span><span class="s2">,</span>
                         <span class="s1">self.v1.x * self.t2[</span><span class="s4">0</span><span class="s1">] + self.v1.y * self.t2[</span><span class="s4">1</span><span class="s1">] + self.v1.z * self.t2[</span><span class="s4">2</span><span class="s1">])</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s2">, </span><span class="s1">self.v2.dot(self.v1))</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s2">, </span><span class="s1">self.v1 * self.v2)</span>

    <span class="s2">def </span><span class="s1">test_angle_to(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span><span class="s2">, </span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">))</span><span class="s2">, </span><span class="s4">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span><span class="s2">, </span><span class="s4">135</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(abs(Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">).angle_to((-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)))</span><span class="s2">, </span><span class="s4">180</span><span class="s1">)</span>
        <span class="s0"># if we rotate v1 by the angle_to v2 around their cross product</span>
        <span class="s0"># we should look in the same direction</span>
        <span class="s1">self.assertEqual(self.v1.rotate(self.v1.angle_to(self.v2)</span><span class="s2">, </span><span class="s1">self.v1.cross(self.v2)).normalize()</span><span class="s2">,</span>
                         <span class="s1">self.v2.normalize())</span>

    <span class="s2">def </span><span class="s1">test_scale_to_length(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v.scale_to_length(</span><span class="s4">2.5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">2.5</span><span class="s2">, </span><span class="s4">2.5</span><span class="s2">, </span><span class="s4">2.5</span><span class="s1">) / math.sqrt(</span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.scale_to_length(</span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.scale_to_length(</span><span class="s4">0</span><span class="s1">)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">self.zeroVec)</span>

    <span class="s2">def </span><span class="s1">test_length(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s2">, </span><span class="s4">5</span><span class="s1">).length()</span><span class="s2">, </span><span class="s1">math.sqrt(</span><span class="s4">3 </span><span class="s1">* </span><span class="s4">3 </span><span class="s1">+ </span><span class="s4">4 </span><span class="s1">* </span><span class="s4">4 </span><span class="s1">+ </span><span class="s4">5 </span><span class="s1">* </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(Vector3(-</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s2">, </span><span class="s4">5</span><span class="s1">).length()</span><span class="s2">, </span><span class="s1">math.sqrt(-</span><span class="s4">3 </span><span class="s1">* -</span><span class="s4">3 </span><span class="s1">+ </span><span class="s4">4 </span><span class="s1">* </span><span class="s4">4 </span><span class="s1">+ </span><span class="s4">5 </span><span class="s1">* </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.zeroVec.length()</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_length_squared(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s2">, </span><span class="s4">5</span><span class="s1">).length_squared()</span><span class="s2">, </span><span class="s4">3 </span><span class="s1">* </span><span class="s4">3 </span><span class="s1">+ </span><span class="s4">4 </span><span class="s1">* </span><span class="s4">4 </span><span class="s1">+ </span><span class="s4">5 </span><span class="s1">* </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(-</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s2">, </span><span class="s4">5</span><span class="s1">).length_squared()</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3 </span><span class="s1">* -</span><span class="s4">3 </span><span class="s1">+ </span><span class="s4">4 </span><span class="s1">* </span><span class="s4">4 </span><span class="s1">+ </span><span class="s4">5 </span><span class="s1">* </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length_squared()</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_reflect(self):</span>
        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">n = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.reflect(n)</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.reflect(</span><span class="s4">3</span><span class="s1">*n)</span><span class="s2">, </span><span class="s1">v.reflect(n))</span>
        <span class="s1">self.assertEqual(v.reflect(-v)</span><span class="s2">, </span><span class="s1">-v)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v.reflect(self.zeroVec))</span>

    <span class="s2">def </span><span class="s1">test_reflect_ip(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s1">-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">n = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.reflect_ip(n)</span><span class="s2">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">v2.reflect_ip(</span><span class="s4">3</span><span class="s1">*n)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">v1.reflect(n))</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">v2.reflect_ip(-v1)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s2">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v2.reflect_ip(self.zeroVec))</span>

    <span class="s2">def </span><span class="s1">test_distance_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_to(self.e2)</span><span class="s2">, </span><span class="s1">math.sqrt(</span><span class="s4">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v2)</span><span class="s2">,</span>
                         <span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y + diff.z * diff.z))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v1)</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v2)</span><span class="s2">,</span>
                         <span class="s1">self.v2.distance_to(self.v1))</span>

    <span class="s2">def </span><span class="s1">test_distance_squared_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to(self.e2)</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(self.v1.distance_squared_to(self.v2)</span><span class="s2">,</span>
                            <span class="s1">diff.x * diff.x + diff.y * diff.y + diff.z * diff.z)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v1)</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v2)</span><span class="s2">,</span>
                         <span class="s1">self.v2.distance_squared_to(self.v1))</span>

    <span class="s2">def </span><span class="s1">test_swizzle(self):</span>
        <span class="s1">self.assertTrue(hasattr(pygame.math</span><span class="s2">, </span><span class="s3">&quot;enable_swizzling&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(hasattr(pygame.math</span><span class="s2">, </span><span class="s3">&quot;disable_swizzling&quot;</span><span class="s1">))</span>
        <span class="s0"># swizzling enabled by default</span>
        <span class="s1">pygame.math.disable_swizzling()</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, lambda </span><span class="s1">: self.v1.yx)</span>
        <span class="s1">pygame.math.enable_swizzling()</span>

        <span class="s1">self.assertEqual(self.v1.yxz</span><span class="s2">, </span><span class="s1">(self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v1.xxyyzzxyz</span><span class="s2">, </span><span class="s1">(self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">,</span>
                                             <span class="s1">self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.z</span><span class="s2">, </span><span class="s1">self.v1.z</span><span class="s2">,</span>
                                             <span class="s1">self.v1.x</span><span class="s2">, </span><span class="s1">self.v1.y</span><span class="s2">, </span><span class="s1">self.v1.z))</span>
        <span class="s1">self.v1.xyz = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">self.t2)</span>
        <span class="s1">self.v1.zxy = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">(self.t2[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">self.t2[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">self.t2[</span><span class="s4">0</span><span class="s1">]))</span>
        <span class="s1">self.v1.yz = self.t2[:</span><span class="s4">2</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">(self.t2[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">self.t2[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">self.t2[</span><span class="s4">1</span><span class="s1">]))</span>
        <span class="s1">self.assertEqual(type(self.v1)</span><span class="s2">, </span><span class="s1">Vector3)</span>

    <span class="s1">@unittest.skipIf(IS_PYPY</span><span class="s2">, </span><span class="s3">&quot;known pypy failure&quot;</span><span class="s1">)</span>
    <span class="s2">def </span><span class="s1">test_invalid_swizzle(self):</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleX():</span>
            <span class="s1">Vector3().xx = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleY():</span>
            <span class="s1">Vector3().yy = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleZ():</span>
            <span class="s1">Vector3().zz = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s2">def </span><span class="s1">invalidSwizzleW():</span>
            <span class="s1">Vector3().ww = (</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleX)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleY)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleZ)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s2">, </span><span class="s1">invalidSwizzleW)</span>
        <span class="s2">def </span><span class="s1">invalidAssignment():</span>
            <span class="s1">Vector3().xy = </span><span class="s4">3</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, </span><span class="s1">invalidAssignment)</span>

    <span class="s2">def </span><span class="s1">test_swizzle_return_types(self):</span>
        <span class="s1">self.assertEqual(type(self.v1.x)</span><span class="s2">, </span><span class="s1">float)</span>
        <span class="s1">self.assertEqual(type(self.v1.xy)</span><span class="s2">, </span><span class="s1">Vector2)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyz)</span><span class="s2">, </span><span class="s1">Vector3)</span>
        <span class="s0"># but we don't have vector4 or above... so tuple.</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxy)</span><span class="s2">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxyx)</span><span class="s2">, </span><span class="s1">tuple)</span>

    <span class="s2">def </span><span class="s1">test_dir_works(self):</span>
        <span class="s0"># not every single one of the attributes...</span>
        <span class="s1">attributes = set([</span><span class="s3">'lerp'</span><span class="s2">, </span><span class="s3">'normalize'</span><span class="s2">, </span><span class="s3">'normalize_ip'</span><span class="s2">, </span><span class="s3">'reflect'</span><span class="s2">, </span><span class="s3">'slerp'</span><span class="s2">, </span><span class="s3">'x'</span><span class="s2">, </span><span class="s3">'y'</span><span class="s1">])</span>
        <span class="s0"># check if this selection of attributes are all there.</span>
        <span class="s1">self.assertTrue(attributes.issubset(set(dir(self.v1))))</span>

    <span class="s2">def </span><span class="s1">test_elementwise(self):</span>
        <span class="s0"># behaviour for &quot;elementwise op scalar&quot;</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x + self.s1</span><span class="s2">, </span><span class="s1">self.v1.y + self.s1</span><span class="s2">, </span><span class="s1">self.v1.z + self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() - self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x - self.s1</span><span class="s2">, </span><span class="s1">self.v1.y - self.s1</span><span class="s2">, </span><span class="s1">self.v1.z - self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() * self.s2</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x * self.s2</span><span class="s2">, </span><span class="s1">self.v1.y * self.s2</span><span class="s2">, </span><span class="s1">self.v1.z * self.s2))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() / self.s2</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x / self.s2</span><span class="s2">, </span><span class="s1">self.v1.y / self.s2</span><span class="s2">, </span><span class="s1">self.v1.z / self.s2))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() // self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x // self.s1</span><span class="s2">, </span><span class="s1">self.v1.y // self.s1</span><span class="s2">, </span><span class="s1">self.v1.z // self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() ** self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x ** self.s1</span><span class="s2">, </span><span class="s1">self.v1.y ** self.s1</span><span class="s2">, </span><span class="s1">self.v1.z ** self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() % self.s1</span><span class="s2">,</span>
                         <span class="s1">(self.v1.x % self.s1</span><span class="s2">, </span><span class="s1">self.v1.y % self.s1</span><span class="s2">, </span><span class="s1">self.v1.z % self.s1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt; self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &gt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &gt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z &gt; self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt; self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &lt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &lt; self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z &lt; self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() == self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x == self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y == self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z == self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() != self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x != self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y != self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z != self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt;= self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &gt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &gt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z &gt;= self.s1)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt;= self.s1</span><span class="s2">,</span>
                         <span class="s1">self.v1.x &lt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.y &lt;= self.s1 </span><span class="s2">and </span><span class="s1">self.v1.z &lt;= self.s1)</span>
        <span class="s0"># behaviour for &quot;scalar op elementwise&quot;</span>
        <span class="s1">self.assertEqual(</span><span class="s4">5 </span><span class="s1">+ self.v1.elementwise()</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">) + self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">3.5 </span><span class="s1">- self.v1.elementwise()</span><span class="s2">, </span><span class="s1">Vector3(</span><span class="s4">3.5</span><span class="s2">, </span><span class="s4">3.5</span><span class="s2">, </span><span class="s4">3.5</span><span class="s1">) - self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">7.5 </span><span class="s1">* self.v1.elementwise() </span><span class="s2">, </span><span class="s4">7.5 </span><span class="s1">* self.v1)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">/ self.v1.z))</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">// self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">// self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">// self.v1.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">// self.v1.z))</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">3.5 </span><span class="s1">** self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(-</span><span class="s4">3.5 </span><span class="s1">** self.v1.x</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">** self.v1.y</span><span class="s2">, </span><span class="s1">-</span><span class="s4">3.5 </span><span class="s1">** self.v1.z))</span>
        <span class="s1">self.assertEqual(</span><span class="s4">3 </span><span class="s1">% self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">3 </span><span class="s1">% self.v1.x</span><span class="s2">, </span><span class="s4">3 </span><span class="s1">% self.v1.y</span><span class="s2">, </span><span class="s4">3 </span><span class="s1">% self.v1.z))</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&lt; self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&lt; self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt; self.v1.y </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt; self.v1.z)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&gt; self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&gt; self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&gt; self.v1.y </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&gt; self.v1.z)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">1 </span><span class="s1">== self.v1.elementwise()</span><span class="s2">, </span><span class="s4">1 </span><span class="s1">== self.v1.x </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">== self.v1.y </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">== self.v1.z)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">1 </span><span class="s1">!= self.v1.elementwise()</span><span class="s2">, </span><span class="s4">1 </span><span class="s1">!= self.v1.x </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">!= self.v1.y </span><span class="s2">and </span><span class="s4">1 </span><span class="s1">!= self.v1.z)</span>
        <span class="s1">self.assertEqual(</span><span class="s4">2 </span><span class="s1">&lt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s4">2 </span><span class="s1">&lt;= self.v1.x </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt;= self.v1.y </span><span class="s2">and </span><span class="s4">2 </span><span class="s1">&lt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.x </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.y </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">&gt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(-</span><span class="s4">7 </span><span class="s1">!= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">!= self.v1.x </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">!= self.v1.y </span><span class="s2">and </span><span class="s1">-</span><span class="s4">7 </span><span class="s1">!= self.v1.z)</span>

        <span class="s0"># behaviour for &quot;elementwise op vector&quot;</span>
        <span class="s1">self.assertEqual(type(self.v1.elementwise() * self.v2)</span><span class="s2">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s2">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s2">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() - self.v2</span><span class="s2">, </span><span class="s1">self.v1 - self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() * self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x * self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y * self.v2.y</span><span class="s2">, </span><span class="s1">self.v1.z * self.v2.z))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() / self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x / self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y / self.v2.y</span><span class="s2">, </span><span class="s1">self.v1.z / self.v2.z))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() // self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x // self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y // self.v2.y</span><span class="s2">, </span><span class="s1">self.v1.z // self.v2.z))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() ** self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x ** self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y ** self.v2.y</span><span class="s2">, </span><span class="s1">self.v1.z ** self.v2.z))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() % self.v2</span><span class="s2">, </span><span class="s1">(self.v1.x % self.v2.x</span><span class="s2">, </span><span class="s1">self.v1.y % self.v2.y</span><span class="s2">, </span><span class="s1">self.v1.z % self.v2.z))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt; self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &gt; self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &gt; self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z &gt; self.v2.z)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt; self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &lt; self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &lt; self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z &lt; self.v2.z)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &gt;= self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &gt;= self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &gt;= self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z &gt;= self.v2.z)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() &lt;= self.v2</span><span class="s2">, </span><span class="s1">self.v1.x &lt;= self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y &lt;= self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z &lt;= self.v2.z)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() == self.v2</span><span class="s2">, </span><span class="s1">self.v1.x == self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y == self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z == self.v2.z)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() != self.v2</span><span class="s2">, </span><span class="s1">self.v1.x != self.v2.x </span><span class="s2">and </span><span class="s1">self.v1.y != self.v2.y </span><span class="s2">and </span><span class="s1">self.v1.z != self.v2.z)</span>
        <span class="s0"># behaviour for &quot;vector op elementwise&quot;</span>
        <span class="s1">self.assertEqual(self.v2 + self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 + self.v1)</span>
        <span class="s1">self.assertEqual(self.v2 - self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 - self.v1)</span>
        <span class="s1">self.assertEqual(self.v2 * self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x * self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y * self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z * self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2 / self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x / self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y / self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z / self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2 // self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x // self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y // self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z // self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2 ** self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x ** self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y ** self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z ** self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2 % self.v1.elementwise()</span><span class="s2">, </span><span class="s1">(self.v2.x % self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y % self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z % self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2 &lt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt; self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &lt; self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2 &gt; self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt; self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &gt; self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2 &lt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &lt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt;= self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &lt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2 &gt;= self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x &gt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt;= self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &gt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2 == self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x == self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y == self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z == self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2 != self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2.x != self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y != self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z != self.v1.z)</span>

        <span class="s0"># behaviour for &quot;elementwise op elementwise&quot;</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() + self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 + self.v1)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() - self.v1.elementwise()</span><span class="s2">, </span><span class="s1">self.v2 - self.v1)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() * self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">(self.v2.x * self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y * self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z * self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() / self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">(self.v2.x / self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y / self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z / self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() // self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">(self.v2.x // self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y // self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z // self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() ** self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">(self.v2.x ** self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y ** self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z ** self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() % self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">(self.v2.x % self.v1.x</span><span class="s2">, </span><span class="s1">self.v2.y % self.v1.y</span><span class="s2">, </span><span class="s1">self.v2.z % self.v1.z))</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &lt; self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x &lt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt; self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &lt; self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &gt; self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x &gt; self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt; self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &gt; self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &lt;= self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x &lt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &lt;= self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &lt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() &gt;= self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x &gt;= self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y &gt;= self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z &gt;= self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() == self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x == self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y == self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z == self.v1.z)</span>
        <span class="s1">self.assertEqual(self.v2.elementwise() != self.v1.elementwise()</span><span class="s2">,</span>
                         <span class="s1">self.v2.x != self.v1.x </span><span class="s2">and </span><span class="s1">self.v2.y != self.v1.y </span><span class="s2">and </span><span class="s1">self.v2.z != self.v1.z)</span>

        <span class="s0"># other behaviour</span>
        <span class="s1">self.assertEqual(abs(self.v1.elementwise())</span><span class="s2">, </span><span class="s1">(abs(self.v1.x)</span><span class="s2">, </span><span class="s1">abs(self.v1.y)</span><span class="s2">, </span><span class="s1">abs(self.v1.z)))</span>
        <span class="s1">self.assertEqual(-self.v1.elementwise()</span><span class="s2">, </span><span class="s1">-self.v1)</span>
        <span class="s1">self.assertEqual(+self.v1.elementwise()</span><span class="s2">, </span><span class="s1">+self.v1)</span>
        <span class="s1">self.assertEqual(bool(self.v1.elementwise())</span><span class="s2">, </span><span class="s1">bool(self.v1))</span>
        <span class="s1">self.assertEqual(bool(Vector3().elementwise())</span><span class="s2">, </span><span class="s1">bool(Vector3()))</span>
        <span class="s1">self.assertEqual(self.zeroVec.elementwise() ** </span><span class="s4">0</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: pow(Vector3(-</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">).elementwise()</span><span class="s2">, </span><span class="s4">1.2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() / </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() // </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() % </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() / self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() // self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">).elementwise() % self.zeroVec)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">/ self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">// self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s2">, lambda </span><span class="s1">: </span><span class="s4">2 </span><span class="s1">% self.zeroVec.elementwise())</span>


    <span class="s2">def </span><span class="s1">test_slerp(self):</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.zeroVec.slerp(self.v1</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: self.v1.slerp(self.zeroVec</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">,</span>
                          <span class="s2">lambda </span><span class="s1">: self.zeroVec.slerp(self.zeroVec</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">))</span>
        <span class="s1">steps = </span><span class="s4">10</span>
        <span class="s1">angle_step = self.e1.angle_to(self.e2) / steps</span>
        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">u </span><span class="s2">in </span><span class="s1">((i</span><span class="s2">, </span><span class="s1">self.e1.slerp(self.e2</span><span class="s2">, </span><span class="s1">i/float(steps))) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">range(steps+</span><span class="s4">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span>
            <span class="s1">self.assertAlmostEqual(self.e1.angle_to(u)</span><span class="s2">, </span><span class="s1">i * angle_step)</span>
        <span class="s1">self.assertEqual(u</span><span class="s2">, </span><span class="s1">self.e2)</span>

        <span class="s1">v1 = Vector3(</span><span class="s4">100</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">10</span><span class="s2">, </span><span class="s4">7</span><span class="s1">)</span>
        <span class="s1">radial_factor = v2.length() / v1.length()</span>
        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">u </span><span class="s2">in </span><span class="s1">((i</span><span class="s2">, </span><span class="s1">v1.slerp(v2</span><span class="s2">, </span><span class="s1">-i/float(steps))) </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">range(steps+</span><span class="s4">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s2">, </span><span class="s1">(v2.length() - v1.length()) * (float(i)/steps) + v1.length())</span>
        <span class="s1">self.assertEqual(u</span><span class="s2">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1.slerp(v1</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">v1)</span>
        <span class="s1">self.assertEqual(v2.slerp(v2</span><span class="s2">, </span><span class="s4">.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v1.slerp(-v1</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_lerp(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">10</span><span class="s2">, </span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s2">, lambda </span><span class="s1">: v1.lerp(v2</span><span class="s2">, </span><span class="s4">2.5</span><span class="s1">))</span>

        <span class="s1">v1 = Vector3(-</span><span class="s4">10</span><span class="s2">, </span><span class="s1">-</span><span class="s4">5</span><span class="s2">, </span><span class="s1">-</span><span class="s4">20</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">10</span><span class="s2">, </span><span class="s1">-</span><span class="s4">20</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">2.5</span><span class="s2">, </span><span class="s1">-</span><span class="s4">20</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_spherical(self):</span>
        <span class="s1">v = Vector3()</span>
        <span class="s1">v.from_spherical(self.v1.as_spherical())</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s2">, </span><span class="s1">v)</span>
        <span class="s1">self.assertEqual(self.e1.as_spherical()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">90</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e2.as_spherical()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">90</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e3.as_spherical()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual((</span><span class="s4">2 </span><span class="s1">* self.e2).as_spherical()</span><span class="s2">, </span><span class="s1">(</span><span class="s4">2</span><span class="s2">, </span><span class="s4">90</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical((</span><span class="s2">None, None, None</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical(</span><span class="s3">&quot;abc&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical((</span><span class="s2">None, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical((</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical((</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s2">, lambda </span><span class="s1">: v.from_spherical(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">v.from_spherical((</span><span class="s4">.5</span><span class="s2">, </span><span class="s4">90</span><span class="s2">, </span><span class="s4">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s4">.5 </span><span class="s1">* self.e2)</span>

    <span class="s2">def </span><span class="s1">test_inplace_operators(self):</span>

        <span class="s1">v = Vector3(</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">v *= </span><span class="s4">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">(</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s1">))</span>

        <span class="s1">v = Vector3(</span><span class="s4">4</span><span class="s2">,</span><span class="s4">4</span><span class="s2">,</span><span class="s4">4</span><span class="s1">)</span>
        <span class="s1">v /= </span><span class="s4">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">(</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s1">))</span>


        <span class="s1">v = Vector3(</span><span class="s4">3.0</span><span class="s2">,</span><span class="s4">3.0</span><span class="s2">,</span><span class="s4">3.0</span><span class="s1">)</span>
        <span class="s1">v -= (</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">(</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s2">,</span><span class="s4">2.0</span><span class="s1">))</span>

        <span class="s1">v = Vector3(</span><span class="s4">3.0</span><span class="s2">,</span><span class="s4">3.0</span><span class="s2">,</span><span class="s4">3.0</span><span class="s1">)</span>
        <span class="s1">v += (</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">(</span><span class="s4">4.0</span><span class="s2">,</span><span class="s4">4.0</span><span class="s2">,</span><span class="s4">4.0</span><span class="s1">))</span>

    <span class="s2">def </span><span class="s1">test_pickle(self):</span>
        <span class="s2">import </span><span class="s1">pickle</span>
        <span class="s1">v2 = Vector2(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">v3 = Vector3(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(pickle.loads(pickle.dumps(v2))</span><span class="s2">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(pickle.loads(pickle.dumps(v3))</span><span class="s2">, </span><span class="s1">v3)</span>


    <span class="s2">def </span><span class="s1">test_subclass_operation(self):</span>
        <span class="s2">class </span><span class="s1">Vector(pygame.math.Vector3):</span>
            <span class="s2">pass</span>
        <span class="s1">v = Vector(</span><span class="s4">2.0</span><span class="s2">, </span><span class="s4">2.0</span><span class="s2">, </span><span class="s4">2.0</span><span class="s1">)</span>
        <span class="s1">v *= </span><span class="s4">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s2">, </span><span class="s1">(</span><span class="s4">4.0</span><span class="s2">, </span><span class="s4">4.0</span><span class="s2">, </span><span class="s4">4.0</span><span class="s1">))</span>


<span class="s2">if </span><span class="s1">__name__ == </span><span class="s3">'__main__'</span><span class="s1">:</span>
    <span class="s1">unittest.main()</span>
</pre>
</body>
</html>