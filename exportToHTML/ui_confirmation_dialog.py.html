<html>
<head>
<title>ui_confirmation_dialog.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ui_confirmation_dialog.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">warnings</span>
<span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s1">Union</span>

<span class="s0">import </span><span class="s1">pygame</span>

<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">ObjectID</span>
<span class="s0">from </span><span class="s1">pygame_gui._constants </span><span class="s0">import </span><span class="s1">UI_CONFIRMATION_DIALOG_CONFIRMED</span><span class="s0">, </span><span class="s1">UI_BUTTON_PRESSED</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.interfaces </span><span class="s0">import </span><span class="s1">IUIManagerInterface</span>
<span class="s0">from </span><span class="s1">pygame_gui.elements </span><span class="s0">import </span><span class="s1">UIWindow</span><span class="s0">, </span><span class="s1">UIButton</span><span class="s0">, </span><span class="s1">UITextBox</span>


<span class="s0">class </span><span class="s1">UIConfirmationDialog(UIWindow):</span>
    <span class="s2">&quot;&quot;&quot; 
    A confirmation dialog that lets a user choose between continuing on a path they've chosen or 
    cancelling. It's good practice to give a very brief description of the action they are 
    confirming on the button they click to confirm it i.e. 'Delete' for a file deletion operation 
    or, 'Rename' for a file rename operation. 
 
    :param rect: The size and position of the window, includes the menu bar across the top. 
    :param manager: The UIManager that manages this UIElement. 
    :param action_long_desc: Long-ish description of action. Can make use of HTML to 
                             style the text. 
    :param window_title: The title of the  window. 
    :param action_short_name: Short, one or two word description of action for button. 
    :param blocking: Whether this window should block all other mouse interactions with the GUI 
                     until it is closed. 
    :param object_id: A custom defined ID for fine tuning of theming. Defaults to 
                      '#confirmation_dialog'. 
    :param visible: Whether the element is visible by default. 
    &quot;&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">rect: pygame.Rect</span><span class="s0">,</span>
                 <span class="s1">manager: IUIManagerInterface</span><span class="s0">,</span>
                 <span class="s1">action_long_desc: str</span><span class="s0">,</span>
                 <span class="s1">*</span><span class="s0">,</span>
                 <span class="s1">window_title: str = </span><span class="s3">'Confirm'</span><span class="s0">,</span>
                 <span class="s1">action_short_name: str = </span><span class="s3">'OK'</span><span class="s0">,</span>
                 <span class="s1">blocking: bool = </span><span class="s0">True,</span>
                 <span class="s1">object_id: Union[ObjectID</span><span class="s0">, </span><span class="s1">str] = ObjectID(</span><span class="s3">'#confirmation_dialog'</span><span class="s0">, None</span><span class="s1">)</span><span class="s0">,</span>
                 <span class="s1">visible: int = </span><span class="s4">1</span><span class="s1">):</span>

        <span class="s1">super().__init__(rect</span><span class="s0">, </span><span class="s1">manager</span><span class="s0">,</span>
                         <span class="s1">window_display_title=window_title</span><span class="s0">,</span>
                         <span class="s1">object_id=object_id</span><span class="s0">,</span>
                         <span class="s1">resizable=</span><span class="s0">True,</span>
                         <span class="s1">visible=visible)</span>

        <span class="s1">minimum_dimensions = (</span><span class="s4">260</span><span class="s0">, </span><span class="s4">200</span><span class="s1">)</span>
        <span class="s0">if </span><span class="s1">rect.width &lt; minimum_dimensions[</span><span class="s4">0</span><span class="s1">] </span><span class="s0">or </span><span class="s1">rect.height &lt; minimum_dimensions[</span><span class="s4">1</span><span class="s1">]:</span>
            <span class="s1">warn_string = (</span><span class="s3">&quot;Initial size: &quot; </span><span class="s1">+ str(rect.size) +</span>
                           <span class="s3">&quot; is less than minimum dimensions: &quot; </span><span class="s1">+ str(minimum_dimensions))</span>
            <span class="s1">warnings.warn(warn_string</span><span class="s0">, </span><span class="s1">UserWarning)</span>
        <span class="s1">self.set_minimum_dimensions(minimum_dimensions)</span>

        <span class="s1">self.confirm_button = UIButton(relative_rect=pygame.Rect(-</span><span class="s4">220</span><span class="s0">, </span><span class="s1">-</span><span class="s4">40</span><span class="s0">, </span><span class="s4">100</span><span class="s0">, </span><span class="s4">30</span><span class="s1">)</span><span class="s0">,</span>
                                       <span class="s1">text=action_short_name</span><span class="s0">,</span>
                                       <span class="s1">manager=self.ui_manager</span><span class="s0">,</span>
                                       <span class="s1">container=self</span><span class="s0">,</span>
                                       <span class="s1">object_id=</span><span class="s3">'#confirm_button'</span><span class="s0">,</span>
                                       <span class="s1">anchors={</span><span class="s3">'left'</span><span class="s1">: </span><span class="s3">'right'</span><span class="s0">,</span>
                                                <span class="s3">'right'</span><span class="s1">: </span><span class="s3">'right'</span><span class="s0">,</span>
                                                <span class="s3">'top'</span><span class="s1">: </span><span class="s3">'bottom'</span><span class="s0">,</span>
                                                <span class="s3">'bottom'</span><span class="s1">: </span><span class="s3">'bottom'</span><span class="s1">})</span>

        <span class="s1">self.cancel_button = UIButton(relative_rect=pygame.Rect(-</span><span class="s4">110</span><span class="s0">, </span><span class="s1">-</span><span class="s4">40</span><span class="s0">, </span><span class="s4">100</span><span class="s0">, </span><span class="s4">30</span><span class="s1">)</span><span class="s0">,</span>
                                      <span class="s1">text=</span><span class="s3">'Cancel'</span><span class="s0">,</span>
                                      <span class="s1">manager=self.ui_manager</span><span class="s0">,</span>
                                      <span class="s1">container=self</span><span class="s0">,</span>
                                      <span class="s1">object_id=</span><span class="s3">'#cancel_button'</span><span class="s0">,</span>
                                      <span class="s1">anchors={</span><span class="s3">'left'</span><span class="s1">: </span><span class="s3">'right'</span><span class="s0">,</span>
                                               <span class="s3">'right'</span><span class="s1">: </span><span class="s3">'right'</span><span class="s0">,</span>
                                               <span class="s3">'top'</span><span class="s1">: </span><span class="s3">'bottom'</span><span class="s0">,</span>
                                               <span class="s3">'bottom'</span><span class="s1">: </span><span class="s3">'bottom'</span><span class="s1">})</span>

        <span class="s1">text_width = self.get_container().get_size()[</span><span class="s4">0</span><span class="s1">] - </span><span class="s4">10</span>
        <span class="s1">text_height = self.get_container().get_size()[</span><span class="s4">1</span><span class="s1">] - </span><span class="s4">50</span>
        <span class="s1">self.confirmation_text = UITextBox(html_text=action_long_desc</span><span class="s0">,</span>
                                           <span class="s1">relative_rect=pygame.Rect(</span><span class="s4">5</span><span class="s0">, </span><span class="s4">5</span><span class="s0">,</span>
                                                                     <span class="s1">text_width</span><span class="s0">,</span>
                                                                     <span class="s1">text_height)</span><span class="s0">,</span>
                                           <span class="s1">manager=self.ui_manager</span><span class="s0">,</span>
                                           <span class="s1">container=self</span><span class="s0">,</span>
                                           <span class="s1">anchors={</span><span class="s3">'left'</span><span class="s1">: </span><span class="s3">'left'</span><span class="s0">,</span>
                                                    <span class="s3">'right'</span><span class="s1">: </span><span class="s3">'right'</span><span class="s0">,</span>
                                                    <span class="s3">'top'</span><span class="s1">: </span><span class="s3">'top'</span><span class="s0">,</span>
                                                    <span class="s3">'bottom'</span><span class="s1">: </span><span class="s3">'bottom'</span><span class="s1">})</span>

        <span class="s1">self.set_blocking(blocking)</span>

    <span class="s0">def </span><span class="s1">process_event(self</span><span class="s0">, </span><span class="s1">event: pygame.event.Event) -&gt; bool:</span>
        <span class="s2">&quot;&quot;&quot; 
        Process any events relevant to the confirmation dialog. 
 
        We close the window when the cancel button is pressed, and post a confirmation event 
        (UI_CONFIRMATION_DIALOG_CONFIRMED) when the OK button is pressed, and also close the window. 
 
        :param event: a pygame.Event. 
 
        :return: Return True if we 'consumed' this event and don't want to pass it on to the rest 
                 of the UI. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">consumed_event = super().process_event(event)</span>

        <span class="s0">if </span><span class="s1">(event.type == pygame.USEREVENT </span><span class="s0">and </span><span class="s1">event.user_type == UI_BUTTON_PRESSED</span>
                <span class="s0">and </span><span class="s1">event.ui_element == self.cancel_button):</span>
            <span class="s1">self.kill()</span>

        <span class="s0">if </span><span class="s1">(event.type == pygame.USEREVENT </span><span class="s0">and </span><span class="s1">event.user_type == UI_BUTTON_PRESSED</span>
                <span class="s0">and </span><span class="s1">event.ui_element == self.confirm_button):</span>
            <span class="s1">event_data = {</span><span class="s3">'user_type'</span><span class="s1">: UI_CONFIRMATION_DIALOG_CONFIRMED</span><span class="s0">,</span>
                          <span class="s3">'ui_element'</span><span class="s1">: self</span><span class="s0">,</span>
                          <span class="s3">'ui_object_id'</span><span class="s1">: self.most_specific_combined_id}</span>
            <span class="s1">confirmation_dialog_event = pygame.event.Event(pygame.USEREVENT</span><span class="s0">, </span><span class="s1">event_data)</span>
            <span class="s1">pygame.event.post(confirmation_dialog_event)</span>
            <span class="s1">self.kill()</span>

        <span class="s0">return </span><span class="s1">consumed_event</span>
</pre>
</body>
</html>