<html>
<head>
<title>ui_scrolling_container.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6897bb;}
.s4 { color: #6a8759;}
.s5 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ui_scrolling_container.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s1">Union</span><span class="s0">, </span><span class="s1">Tuple</span><span class="s0">, </span><span class="s1">Dict</span>

<span class="s0">import </span><span class="s1">pygame</span>

<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">ObjectID</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.interfaces </span><span class="s0">import </span><span class="s1">IContainerLikeInterface</span><span class="s0">, </span><span class="s1">IUIContainerInterface</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.interfaces </span><span class="s0">import </span><span class="s1">IUIManagerInterface</span>
<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">UIElement</span><span class="s0">, </span><span class="s1">UIContainer</span>

<span class="s0">from </span><span class="s1">pygame_gui.elements.ui_vertical_scroll_bar </span><span class="s0">import </span><span class="s1">UIVerticalScrollBar</span>
<span class="s0">from </span><span class="s1">pygame_gui.elements.ui_horizontal_scroll_bar </span><span class="s0">import </span><span class="s1">UIHorizontalScrollBar</span>


<span class="s0">class </span><span class="s1">UIScrollingContainer(UIElement</span><span class="s0">, </span><span class="s1">IContainerLikeInterface):</span>
    <span class="s2">&quot;&quot;&quot; 
    A container like UI element that lets users scroll around a larger container of content with 
    scroll bars. 
 
    :param relative_rect: The size and relative position of the container. This will also be the 
                          starting size of the scrolling area. 
    :param manager: The UI manager for this element. 
    :param starting_height: The starting layer height of this container above it's container. 
                            Defaults to 1. 
    :param container: The container this container is within. Defaults to None (which is the root 
                      container for the UI) 
    :param parent_element: A parent element for this container. Defaults to None, or the 
                           container if you've set that. 
    :param object_id: An object ID for this element. 
    :param anchors: Layout anchors in a dictionary. 
    :param visible: Whether the element is visible by default. Warning - container visibility 
                    may override this. 
    &quot;&quot;&quot;</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">,</span>
                 <span class="s1">relative_rect: pygame.Rect</span><span class="s0">,</span>
                 <span class="s1">manager: IUIManagerInterface</span><span class="s0">,</span>
                 <span class="s1">*</span><span class="s0">,</span>
                 <span class="s1">starting_height: int = </span><span class="s3">1</span><span class="s0">,</span>
                 <span class="s1">container: Union[IContainerLikeInterface</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">parent_element: Union[UIElement</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">object_id: Union[ObjectID</span><span class="s0">, </span><span class="s1">str</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">anchors: Union[Dict[str</span><span class="s0">, </span><span class="s1">str]</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">visible: int = </span><span class="s3">1</span><span class="s1">):</span>

        <span class="s1">super().__init__(relative_rect</span><span class="s0">,</span>
                         <span class="s1">manager</span><span class="s0">,</span>
                         <span class="s1">container</span><span class="s0">,</span>
                         <span class="s1">starting_height=starting_height</span><span class="s0">,</span>
                         <span class="s1">layer_thickness=</span><span class="s3">2</span><span class="s0">,</span>
                         <span class="s1">anchors=anchors</span><span class="s0">,</span>
                         <span class="s1">visible=visible)</span>

        <span class="s1">self._create_valid_ids(container=container</span><span class="s0">,</span>
                               <span class="s1">parent_element=parent_element</span><span class="s0">,</span>
                               <span class="s1">object_id=object_id</span><span class="s0">,</span>
                               <span class="s1">element_id=</span><span class="s4">'scrolling_container'</span><span class="s1">)</span>

        <span class="s5"># self.parent_element = parent_element</span>
        <span class="s1">self.scroll_bar_width = </span><span class="s3">0</span>
        <span class="s1">self.scroll_bar_height = </span><span class="s3">0</span>

        <span class="s1">self.need_to_sort_out_scrollbars = </span><span class="s0">False</span>
        <span class="s1">self.vert_scroll_bar = </span><span class="s0">None  </span><span class="s5"># type: Union[UIVerticalScrollBar, None]</span>
        <span class="s1">self.horiz_scroll_bar = </span><span class="s0">None  </span><span class="s5"># type: Union[UIHorizontalScrollBar, None]</span>

        <span class="s1">self.set_image(self.ui_manager.get_universal_empty_surface())</span>

        <span class="s5"># this contains the scroll bars and the 'view' container</span>
        <span class="s1">self._root_container = UIContainer(relative_rect=relative_rect</span><span class="s0">,</span>
                                           <span class="s1">manager=manager</span><span class="s0">,</span>
                                           <span class="s1">starting_height=starting_height</span><span class="s0">,</span>
                                           <span class="s1">container=container</span><span class="s0">,</span>
                                           <span class="s1">parent_element=parent_element</span><span class="s0">,</span>
                                           <span class="s1">object_id=ObjectID(object_id=</span><span class="s4">'#root_container'</span><span class="s0">,</span>
                                                              <span class="s1">class_id=</span><span class="s0">None</span><span class="s1">)</span><span class="s0">,</span>
                                           <span class="s1">anchors=anchors</span><span class="s0">,</span>
                                           <span class="s1">visible=self.visible)</span>

        <span class="s5"># This container is the view on to the scrollable container it's size is determined by</span>
        <span class="s5"># the size of the root container and whether there are any scroll bars or not.</span>
        <span class="s1">view_rect = pygame.Rect(</span><span class="s3">0</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">relative_rect.width</span><span class="s0">, </span><span class="s1">relative_rect.height)</span>
        <span class="s1">self._view_container = UIContainer(relative_rect=view_rect</span><span class="s0">,</span>
                                           <span class="s1">manager=manager</span><span class="s0">,</span>
                                           <span class="s1">starting_height=</span><span class="s3">0</span><span class="s0">,</span>
                                           <span class="s1">container=self._root_container</span><span class="s0">,</span>
                                           <span class="s1">parent_element=parent_element</span><span class="s0">,</span>
                                           <span class="s1">object_id=ObjectID(object_id=</span><span class="s4">'#view_container'</span><span class="s0">,</span>
                                                              <span class="s1">class_id=</span><span class="s0">None</span><span class="s1">)</span><span class="s0">,</span>
                                           <span class="s1">anchors={</span><span class="s4">'left'</span><span class="s1">: </span><span class="s4">'left'</span><span class="s0">,</span>
                                                    <span class="s4">'right'</span><span class="s1">: </span><span class="s4">'right'</span><span class="s0">,</span>
                                                    <span class="s4">'top'</span><span class="s1">: </span><span class="s4">'top'</span><span class="s0">,</span>
                                                    <span class="s4">'bottom'</span><span class="s1">: </span><span class="s4">'bottom'</span><span class="s1">})</span>

        <span class="s5"># This container is what we actually put other stuff in.</span>
        <span class="s5"># It is aligned to the top left corner but that isn't that important for a container that</span>
        <span class="s5"># can be much larger than it's view</span>
        <span class="s1">scrollable_rect = pygame.Rect(</span><span class="s3">0</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">relative_rect.width</span><span class="s0">, </span><span class="s1">relative_rect.height)</span>
        <span class="s1">self.scrollable_container = UIContainer(relative_rect=scrollable_rect</span><span class="s0">,</span>
                                                <span class="s1">manager=manager</span><span class="s0">,</span>
                                                <span class="s1">starting_height=</span><span class="s3">0</span><span class="s0">,</span>
                                                <span class="s1">container=self._view_container</span><span class="s0">,</span>
                                                <span class="s1">parent_element=parent_element</span><span class="s0">,</span>
                                                <span class="s1">object_id=ObjectID(</span>
                                                    <span class="s1">object_id=</span><span class="s4">'#scrollable_container'</span><span class="s0">,</span>
                                                    <span class="s1">class_id=</span><span class="s0">None</span><span class="s1">)</span><span class="s0">,</span>
                                                <span class="s1">anchors={</span><span class="s4">'left'</span><span class="s1">: </span><span class="s4">'left'</span><span class="s0">,</span>
                                                         <span class="s4">'right'</span><span class="s1">: </span><span class="s4">'left'</span><span class="s0">,</span>
                                                         <span class="s4">'top'</span><span class="s1">: </span><span class="s4">'top'</span><span class="s0">,</span>
                                                         <span class="s4">'bottom'</span><span class="s1">: </span><span class="s4">'top'</span><span class="s1">})</span>

        <span class="s1">self.scrolling_height = </span><span class="s3">0</span>
        <span class="s1">self.scrolling_width = </span><span class="s3">0</span>

        <span class="s1">self.scrolling_bottom = </span><span class="s3">0</span>
        <span class="s1">self.scrolling_right = </span><span class="s3">0</span>
        <span class="s1">self._calculate_scrolling_dimensions()</span>

    <span class="s0">def </span><span class="s1">get_container(self) -&gt; IUIContainerInterface:</span>
        <span class="s2">&quot;&quot;&quot; 
        Gets the scrollable container area (the one that moves around with the scrollbars) 
        from this container-like UI element. 
 
        :return: the scrolling container. 
        &quot;&quot;&quot;</span>
        <span class="s0">return </span><span class="s1">self.scrollable_container</span>

    <span class="s0">def </span><span class="s1">kill(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Overrides the basic kill() method of a pygame sprite so that we also kill all the UI 
        elements in this panel. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">self._root_container.kill()</span>
        <span class="s1">super().kill()</span>

    <span class="s0">def </span><span class="s1">set_position(self</span><span class="s0">, </span><span class="s1">position: Union[pygame.math.Vector2</span><span class="s0">,</span>
                                           <span class="s1">Tuple[int</span><span class="s0">, </span><span class="s1">int]</span><span class="s0">,</span>
                                           <span class="s1">Tuple[float</span><span class="s0">, </span><span class="s1">float]]):</span>
        <span class="s2">&quot;&quot;&quot; 
        Method to directly set the absolute screen rect position of an element. 
 
        :param position: The new position to set. 
 
        &quot;&quot;&quot;</span>

        <span class="s1">super().set_position(position)</span>
        <span class="s1">self._root_container.set_dimensions(position)</span>

    <span class="s0">def </span><span class="s1">set_relative_position(self</span><span class="s0">, </span><span class="s1">position: Union[pygame.math.Vector2</span><span class="s0">,</span>
                                                    <span class="s1">Tuple[int</span><span class="s0">, </span><span class="s1">int]</span><span class="s0">,</span>
                                                    <span class="s1">Tuple[float</span><span class="s0">, </span><span class="s1">float]]):</span>
        <span class="s2">&quot;&quot;&quot; 
        Method to directly set the relative rect position of an element. 
 
        :param position: The new position to set. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">super().set_relative_position(position)</span>
        <span class="s1">self._root_container.set_relative_position(position)</span>

    <span class="s0">def </span><span class="s1">set_dimensions(self</span><span class="s0">, </span><span class="s1">dimensions: Union[pygame.math.Vector2</span><span class="s0">,</span>
                                               <span class="s1">Tuple[int</span><span class="s0">, </span><span class="s1">int]</span><span class="s0">,</span>
                                               <span class="s1">Tuple[float</span><span class="s0">, </span><span class="s1">float]]):</span>
        <span class="s2">&quot;&quot;&quot; 
        Method to directly set the dimensions of an element. 
 
        NOTE: Using this on elements inside containers with non-default anchoring arrangements 
        may make a mess of them. 
 
        :param dimensions: The new dimensions to set. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">super().set_dimensions(dimensions)</span>
        <span class="s1">self._root_container.set_dimensions(dimensions)</span>

        <span class="s1">self._calculate_scrolling_dimensions()</span>
        <span class="s1">self._sort_out_element_container_scroll_bars()</span>

    <span class="s0">def </span><span class="s1">set_scrollable_area_dimensions(self</span><span class="s0">, </span><span class="s1">dimensions: Union[pygame.math.Vector2</span><span class="s0">,</span>
                                                               <span class="s1">Tuple[int</span><span class="s0">, </span><span class="s1">int]</span><span class="s0">,</span>
                                                               <span class="s1">Tuple[float</span><span class="s0">, </span><span class="s1">float]]):</span>
        <span class="s2">&quot;&quot;&quot; 
        Set the size of the scrollable area container. It starts the same size as the view 
        container but often you want to expand it, or why have a scrollable container? 
 
        :param dimensions: The new dimensions. 
        &quot;&quot;&quot;</span>
        <span class="s1">self.scrollable_container.set_dimensions(dimensions)</span>

        <span class="s1">self._calculate_scrolling_dimensions()</span>
        <span class="s1">self._sort_out_element_container_scroll_bars()</span>

    <span class="s0">def </span><span class="s1">update(self</span><span class="s0">, </span><span class="s1">time_delta: float):</span>
        <span class="s2">&quot;&quot;&quot; 
        Updates the scrolling container's position based upon the scroll bars and updates the 
        scrollbar's visible percentage as well if that has changed. 
 
        :param time_delta: The time passed between frames, measured in seconds. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">super().update(time_delta)</span>

        <span class="s0">if </span><span class="s1">(self.vert_scroll_bar </span><span class="s0">is not None and</span>
                <span class="s1">self.vert_scroll_bar.check_has_moved_recently()):</span>

            <span class="s1">self._calculate_scrolling_dimensions()</span>
            <span class="s1">vis_percent = self._view_container.rect.height / self.scrolling_height</span>
            <span class="s0">if </span><span class="s1">self.vert_scroll_bar.start_percentage &lt;= </span><span class="s3">0.5</span><span class="s1">:</span>
                <span class="s1">start_height = int(self.vert_scroll_bar.start_percentage *</span>
                                   <span class="s1">self.scrolling_height)</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">button_percent_height = (self.vert_scroll_bar.sliding_button.rect.height /</span>
                                         <span class="s1">self.vert_scroll_bar.scrollable_height)</span>
                <span class="s1">button_bottom_percent = (self.vert_scroll_bar.start_percentage +</span>
                                         <span class="s1">button_percent_height)</span>
                <span class="s1">start_height = (int(button_bottom_percent * self.scrolling_height) -</span>
                                <span class="s1">self._view_container.rect.height)</span>
            <span class="s0">if </span><span class="s1">vis_percent &lt; </span><span class="s3">1.0</span><span class="s1">:</span>
                <span class="s1">self.vert_scroll_bar.set_visible_percentage(vis_percent)</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">self._remove_vert_scrollbar()</span>

            <span class="s0">if </span><span class="s1">self.scrolling_bottom &lt; self._view_container.rect.bottom:</span>
                <span class="s1">start_height = min(start_height</span><span class="s0">, </span><span class="s1">self._view_container.rect.height)</span>

            <span class="s1">new_pos = (self.scrollable_container.relative_rect.x</span><span class="s0">,</span>
                       <span class="s1">-start_height)</span>
            <span class="s1">self.scrollable_container.set_relative_position(new_pos)</span>

        <span class="s0">if </span><span class="s1">(self.horiz_scroll_bar </span><span class="s0">is not None and</span>
                <span class="s1">self.horiz_scroll_bar.check_has_moved_recently()):</span>

            <span class="s1">self._calculate_scrolling_dimensions()</span>
            <span class="s1">vis_percent = self._view_container.rect.width / self.scrolling_width</span>
            <span class="s0">if </span><span class="s1">self.horiz_scroll_bar.start_percentage &lt;= </span><span class="s3">0.5</span><span class="s1">:</span>
                <span class="s1">start_width = int(self.horiz_scroll_bar.start_percentage *</span>
                                  <span class="s1">self.scrolling_width)</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">button_percent_width = (self.horiz_scroll_bar.sliding_button.rect.width /</span>
                                        <span class="s1">self.horiz_scroll_bar.scrollable_width)</span>
                <span class="s1">button_right_percent = (self.horiz_scroll_bar.start_percentage +</span>
                                        <span class="s1">button_percent_width)</span>
                <span class="s1">start_width = (int(button_right_percent * self.scrolling_width) -</span>
                               <span class="s1">self._view_container.rect.width)</span>
            <span class="s0">if </span><span class="s1">vis_percent &lt; </span><span class="s3">1.0</span><span class="s1">:</span>
                <span class="s1">self.horiz_scroll_bar.set_visible_percentage(vis_percent)</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">self._remove_horiz_scrollbar()</span>

            <span class="s0">if </span><span class="s1">self.scrolling_right &lt; self._view_container.rect.right:</span>
                <span class="s1">start_width = min(start_width</span><span class="s0">, </span><span class="s1">self._view_container.rect.width)</span>
            <span class="s1">new_pos = (-start_width</span><span class="s0">,</span>
                       <span class="s1">self.scrollable_container.relative_rect.y)</span>
            <span class="s1">self.scrollable_container.set_relative_position(new_pos)</span>

    <span class="s0">def </span><span class="s1">_calculate_scrolling_dimensions(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Calculate all the variables we need to scroll the container correctly. 
 
        This is a bit of a fiddly process since we can resize our viewing area, the scrollable 
        area and we generally don't want to yank the area you are looking at too much either. 
 
        Plus, the scrollbars only have somewhat limited accuracy so need clamping... 
        &quot;&quot;&quot;</span>
        <span class="s1">scrolling_top = min(self.scrollable_container.rect.top</span><span class="s0">,</span>
                            <span class="s1">self._view_container.rect.top)</span>

        <span class="s1">scrolling_left = min(self.scrollable_container.rect.left</span><span class="s0">,</span>
                             <span class="s1">self._view_container.rect.left)</span>
        <span class="s5"># used for clamping</span>
        <span class="s1">self.scrolling_bottom = max(self.scrollable_container.rect.bottom</span><span class="s0">,</span>
                                    <span class="s1">self._view_container.rect.bottom)</span>
        <span class="s1">self.scrolling_right = max(self.scrollable_container.rect.right</span><span class="s0">,</span>
                                   <span class="s1">self._view_container.rect.right)</span>

        <span class="s1">self.scrolling_height = self.scrolling_bottom - scrolling_top</span>
        <span class="s1">self.scrolling_width = self.scrolling_right - scrolling_left</span>

    <span class="s0">def </span><span class="s1">_sort_out_element_container_scroll_bars(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        This creates, re-sizes or removes the scrollbars after resizing, but not after the scroll 
        bar has been moved. Instead it tries to keep the scrollbars in the same approximate position 
        they were in before resizing 
        &quot;&quot;&quot;</span>
        <span class="s1">self._check_scroll_bars_and_adjust()</span>
        <span class="s1">need_horiz_scroll_bar</span><span class="s0">, </span><span class="s1">need_vert_scroll_bar = self._check_scroll_bars_and_adjust()</span>

        <span class="s0">if </span><span class="s1">need_vert_scroll_bar:</span>
            <span class="s1">vis_percent = self._view_container.rect.height / self.scrolling_height</span>
            <span class="s0">if </span><span class="s1">self.vert_scroll_bar </span><span class="s0">is None</span><span class="s1">:</span>
                <span class="s1">self.scroll_bar_width = </span><span class="s3">20</span>
                <span class="s1">scroll_bar_rect = pygame.Rect(-self.scroll_bar_width</span><span class="s0">,</span>
                                              <span class="s3">0</span><span class="s0">,</span>
                                              <span class="s1">self.scroll_bar_width</span><span class="s0">,</span>
                                              <span class="s1">self._view_container.rect.height)</span>
                <span class="s1">self.vert_scroll_bar = UIVerticalScrollBar(relative_rect=scroll_bar_rect</span><span class="s0">,</span>
                                                           <span class="s1">visible_percentage=vis_percent</span><span class="s0">,</span>
                                                           <span class="s1">manager=self.ui_manager</span><span class="s0">,</span>
                                                           <span class="s1">container=self._root_container</span><span class="s0">,</span>
                                                           <span class="s1">parent_element=self</span><span class="s0">,</span>
                                                           <span class="s1">anchors={</span><span class="s4">'left'</span><span class="s1">: </span><span class="s4">'right'</span><span class="s0">,</span>
                                                                    <span class="s4">'right'</span><span class="s1">: </span><span class="s4">'right'</span><span class="s0">,</span>
                                                                    <span class="s4">'top'</span><span class="s1">: </span><span class="s4">'top'</span><span class="s0">,</span>
                                                                    <span class="s4">'bottom'</span><span class="s1">: </span><span class="s4">'bottom'</span><span class="s1">})</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">start_percent = ((self._view_container.rect.top -</span>
                                  <span class="s1">self.scrollable_container.rect.top)</span>
                                 <span class="s1">/ self.scrolling_height)</span>
                <span class="s1">self.vert_scroll_bar.start_percentage = start_percent</span>
                <span class="s1">self.vert_scroll_bar.set_visible_percentage(vis_percent)</span>
                <span class="s1">self.vert_scroll_bar.set_dimensions((self.scroll_bar_width</span><span class="s0">,</span>
                                                     <span class="s1">self._view_container.rect.height))</span>
        <span class="s0">else</span><span class="s1">:</span>
            <span class="s1">self._remove_vert_scrollbar()</span>

        <span class="s0">if </span><span class="s1">need_horiz_scroll_bar:</span>
            <span class="s1">vis_percent = self._view_container.rect.width / self.scrolling_width</span>
            <span class="s0">if </span><span class="s1">self.horiz_scroll_bar </span><span class="s0">is None</span><span class="s1">:</span>
                <span class="s1">self.scroll_bar_height = </span><span class="s3">20</span>
                <span class="s1">scroll_bar_rect = pygame.Rect(</span><span class="s3">0</span><span class="s0">,</span>
                                              <span class="s1">-self.scroll_bar_height</span><span class="s0">,</span>
                                              <span class="s1">self._view_container.rect.width</span><span class="s0">,</span>
                                              <span class="s1">self.scroll_bar_height)</span>
                <span class="s1">self.horiz_scroll_bar = UIHorizontalScrollBar(relative_rect=scroll_bar_rect</span><span class="s0">,</span>
                                                              <span class="s1">visible_percentage=vis_percent</span><span class="s0">,</span>
                                                              <span class="s1">manager=self.ui_manager</span><span class="s0">,</span>
                                                              <span class="s1">container=self._root_container</span><span class="s0">,</span>
                                                              <span class="s1">parent_element=self</span><span class="s0">,</span>
                                                              <span class="s1">anchors={</span><span class="s4">'left'</span><span class="s1">: </span><span class="s4">'left'</span><span class="s0">,</span>
                                                                       <span class="s4">'right'</span><span class="s1">: </span><span class="s4">'right'</span><span class="s0">,</span>
                                                                       <span class="s4">'top'</span><span class="s1">: </span><span class="s4">'bottom'</span><span class="s0">,</span>
                                                                       <span class="s4">'bottom'</span><span class="s1">: </span><span class="s4">'bottom'</span><span class="s1">})</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">start_percent = ((self._view_container.rect.left -</span>
                                  <span class="s1">self.scrollable_container.rect.left)</span>
                                 <span class="s1">/ self.scrolling_width)</span>
                <span class="s1">self.horiz_scroll_bar.start_percentage = start_percent</span>
                <span class="s1">self.horiz_scroll_bar.set_visible_percentage(vis_percent)</span>
                <span class="s1">self.horiz_scroll_bar.set_dimensions((self._view_container.rect.width</span><span class="s0">,</span>
                                                      <span class="s1">self.scroll_bar_height))</span>
        <span class="s0">else</span><span class="s1">:</span>
            <span class="s1">self._remove_horiz_scrollbar()</span>

    <span class="s0">def </span><span class="s1">_check_scroll_bars_and_adjust(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Check if we need a horizontal or vertical scrollbar and adjust the containers if we do. 
 
        Adjusting the containers for a scrollbar, may mean we now need a scrollbar in the other 
        dimension so we need to call this twice. 
        &quot;&quot;&quot;</span>
        <span class="s1">self.scroll_bar_width = </span><span class="s3">0</span>
        <span class="s1">self.scroll_bar_height = </span><span class="s3">0</span>
        <span class="s1">need_horiz_scroll_bar = </span><span class="s0">False</span>
        <span class="s1">need_vert_scroll_bar = </span><span class="s0">False</span>
        <span class="s0">if </span><span class="s1">(self.scrolling_height &gt; self._view_container.rect.height </span><span class="s0">or</span>
                <span class="s1">self.scrollable_container.relative_rect.top != </span><span class="s3">0</span><span class="s1">):</span>
            <span class="s1">need_vert_scroll_bar = </span><span class="s0">True</span>
            <span class="s1">self.scroll_bar_width = </span><span class="s3">20</span>
        <span class="s0">if </span><span class="s1">(self.scrolling_width &gt; self._view_container.rect.width </span><span class="s0">or</span>
                <span class="s1">self.scrollable_container.relative_rect.left != </span><span class="s3">0</span><span class="s1">):</span>
            <span class="s1">need_horiz_scroll_bar = </span><span class="s0">True</span>
            <span class="s1">self.scroll_bar_height = </span><span class="s3">20</span>
        <span class="s0">if </span><span class="s1">need_vert_scroll_bar </span><span class="s0">or </span><span class="s1">need_horiz_scroll_bar:</span>
            <span class="s1">new_width = (self._root_container.rect.width - self.scroll_bar_width)</span>
            <span class="s1">new_height = (self._root_container.rect.height - self.scroll_bar_height)</span>
            <span class="s1">new_dimensions = (new_width</span><span class="s0">, </span><span class="s1">new_height)</span>
            <span class="s1">self._view_container.set_dimensions(new_dimensions)</span>
        <span class="s1">self._calculate_scrolling_dimensions()</span>
        <span class="s0">return </span><span class="s1">need_horiz_scroll_bar</span><span class="s0">, </span><span class="s1">need_vert_scroll_bar</span>

    <span class="s0">def </span><span class="s1">_remove_vert_scrollbar(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Get rid of the vertical scroll bar and resize the containers appropriately. 
 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self.vert_scroll_bar </span><span class="s0">is not None</span><span class="s1">:</span>
            <span class="s1">self.vert_scroll_bar.kill()</span>
            <span class="s1">self.vert_scroll_bar = </span><span class="s0">None</span>
            <span class="s1">self.scroll_bar_width = </span><span class="s3">0</span>
            <span class="s1">new_width = (self._root_container.rect.width - self.scroll_bar_width)</span>

            <span class="s1">old_height = self._view_container.rect.height</span>
            <span class="s1">new_dimensions = (new_width</span><span class="s0">, </span><span class="s1">old_height)</span>
            <span class="s1">self._view_container.set_dimensions(new_dimensions)</span>
            <span class="s1">self._calculate_scrolling_dimensions()</span>
            <span class="s0">if </span><span class="s1">self.horiz_scroll_bar </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s1">self.horiz_scroll_bar.set_dimensions((self._view_container.rect.width</span><span class="s0">,</span>
                                                      <span class="s1">self.scroll_bar_height))</span>

    <span class="s0">def </span><span class="s1">_remove_horiz_scrollbar(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Get rid of the horiz scroll bar and resize the containers appropriately. 
 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self.horiz_scroll_bar </span><span class="s0">is not None</span><span class="s1">:</span>
            <span class="s1">self.horiz_scroll_bar.kill()</span>
            <span class="s1">self.horiz_scroll_bar = </span><span class="s0">None</span>
            <span class="s1">self.scroll_bar_height = </span><span class="s3">0</span>
            <span class="s1">new_height = (self._root_container.rect.height - self.scroll_bar_height)</span>

            <span class="s1">old_width = self._view_container.rect.width</span>
            <span class="s1">new_dimensions = (old_width</span><span class="s0">, </span><span class="s1">new_height)</span>
            <span class="s1">self._view_container.set_dimensions(new_dimensions)</span>
            <span class="s1">self._calculate_scrolling_dimensions()</span>
            <span class="s0">if </span><span class="s1">self.vert_scroll_bar </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s1">self.vert_scroll_bar.set_dimensions((self.scroll_bar_width</span><span class="s0">,</span>
                                                     <span class="s1">self._view_container.rect.height))</span>

    <span class="s0">def </span><span class="s1">disable(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Disables all elements in the container so they are no longer interactive. 
        &quot;&quot;&quot;</span>
        <span class="s0">if </span><span class="s1">self.is_enabled:</span>
            <span class="s1">self.is_enabled = </span><span class="s0">False</span>
            <span class="s1">self._root_container.disable()</span>

    <span class="s0">def </span><span class="s1">enable(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        Enables all elements in the container so they are interactive again. 
        &quot;&quot;&quot;</span>
        <span class="s0">if not </span><span class="s1">self.is_enabled:</span>
            <span class="s1">self.is_enabled = </span><span class="s0">True</span>
            <span class="s1">self._root_container.enable()</span>

    <span class="s0">def </span><span class="s1">show(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        In addition to the base UIElement.show() - call show() of owned container - _root_container. 
        All other subelements (view_container, scrollbars) are children of _root_container, so 
        it's visibility will propagate to them - there is no need to call their show() methods 
        separately. 
        &quot;&quot;&quot;</span>
        <span class="s1">super().show()</span>
        <span class="s1">self._root_container.show()</span>

    <span class="s0">def </span><span class="s1">hide(self):</span>
        <span class="s2">&quot;&quot;&quot; 
        In addition to the base UIElement.hide() - call hide() of owned container - _root_container. 
        All other subelements (view_container, scrollbars) are children of _root_container, so 
        it's visibility will propagate to them - there is no need to call their hide() methods 
        separately. 
        &quot;&quot;&quot;</span>
        <span class="s1">self._root_container.hide()</span>
        <span class="s1">super().hide()</span>
</pre>
</body>
</html>