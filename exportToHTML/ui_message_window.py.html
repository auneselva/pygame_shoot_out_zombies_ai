<html>
<head>
<title>ui_message_window.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ui_message_window.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">warnings</span>
<span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s1">Union</span>

<span class="s0">import </span><span class="s1">pygame</span>

<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">ObjectID</span>
<span class="s0">from </span><span class="s1">pygame_gui._constants </span><span class="s0">import </span><span class="s1">UI_BUTTON_PRESSED</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.interfaces </span><span class="s0">import </span><span class="s1">IUIManagerInterface</span>
<span class="s0">from </span><span class="s1">pygame_gui.elements </span><span class="s0">import </span><span class="s1">UIButton</span><span class="s0">, </span><span class="s1">UITextBox</span><span class="s0">, </span><span class="s1">UIWindow</span>


<span class="s0">class </span><span class="s1">UIMessageWindow(UIWindow):</span>
    <span class="s2">&quot;&quot;&quot; 
    A simple popup window for delivering text-only messages to users. 
 
    :param rect: The size and position of the window, includes the menu bar across the top. 
    :param html_message: The message itself. Can make use of HTML (a subset of) to style the text. 
    :param manager: The UIManager that manages this UIElement. 
    :param window_title: The title of the  window. 
    :param object_id: A custom defined ID for fine tuning of theming. Defaults to '#message_window'. 
    :param visible: Whether the element is visible by default. 
    &quot;&quot;&quot;</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">rect: pygame.Rect</span><span class="s0">,</span>
                 <span class="s1">html_message: str</span><span class="s0">,</span>
                 <span class="s1">manager: IUIManagerInterface</span><span class="s0">,</span>
                 <span class="s1">*</span><span class="s0">,</span>
                 <span class="s1">window_title: str = </span><span class="s3">'Message'</span><span class="s0">,</span>
                 <span class="s1">object_id: Union[ObjectID</span><span class="s0">, </span><span class="s1">str] = ObjectID(</span><span class="s3">'#message_window'</span><span class="s0">, None</span><span class="s1">)</span><span class="s0">,</span>
                 <span class="s1">visible: int = </span><span class="s4">1</span><span class="s1">):</span>

        <span class="s1">super().__init__(rect</span><span class="s0">, </span><span class="s1">manager</span><span class="s0">,</span>
                         <span class="s1">window_display_title=window_title</span><span class="s0">,</span>
                         <span class="s1">object_id=object_id</span><span class="s0">,</span>
                         <span class="s1">resizable=</span><span class="s0">True,</span>
                         <span class="s1">visible=visible)</span>

        <span class="s1">minimum_dimensions = (</span><span class="s4">250</span><span class="s0">, </span><span class="s4">160</span><span class="s1">)</span>
        <span class="s0">if </span><span class="s1">rect.width &lt; minimum_dimensions[</span><span class="s4">0</span><span class="s1">] </span><span class="s0">or </span><span class="s1">rect.height &lt; minimum_dimensions[</span><span class="s4">1</span><span class="s1">]:</span>
            <span class="s1">warn_string = (</span><span class="s3">&quot;Initial size: &quot; </span><span class="s1">+ str(rect.size) +</span>
                           <span class="s3">&quot; is less than minimum dimensions: &quot; </span><span class="s1">+ str(minimum_dimensions))</span>
            <span class="s1">warnings.warn(warn_string</span><span class="s0">, </span><span class="s1">UserWarning)</span>
        <span class="s1">self.set_minimum_dimensions(minimum_dimensions)</span>

        <span class="s1">self.dismiss_button = </span><span class="s0">None</span>
        <span class="s1">self.text_block = </span><span class="s0">None</span>

        <span class="s1">button_size = (</span><span class="s4">70</span><span class="s0">, </span><span class="s4">20</span><span class="s1">)</span>
        <span class="s1">button_spacing = </span><span class="s4">10</span>
        <span class="s1">button_vertical_space = (button_spacing * </span><span class="s4">2</span><span class="s1">) + button_size[</span><span class="s4">1</span><span class="s1">]</span>

        <span class="s1">dismiss_button_rect = pygame.Rect((</span><span class="s4">0</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">button_size)</span>
        <span class="s1">dismiss_button_rect.bottomright = (-button_spacing</span><span class="s0">, </span><span class="s1">-button_spacing)</span>
        <span class="s1">self.dismiss_button = UIButton(relative_rect=dismiss_button_rect</span><span class="s0">,</span>
                                       <span class="s1">text=</span><span class="s3">&quot;Dismiss&quot;</span><span class="s0">,</span>
                                       <span class="s1">manager=manager</span><span class="s0">,</span>
                                       <span class="s1">container=self</span><span class="s0">,</span>
                                       <span class="s1">tool_tip_text=</span><span class="s3">&quot;Click to get rid of this message.&quot;</span><span class="s0">,</span>
                                       <span class="s1">object_id=</span><span class="s3">'#dismiss_button'</span><span class="s0">,</span>
                                       <span class="s1">anchors={</span><span class="s3">&quot;left&quot;</span><span class="s1">: </span><span class="s3">&quot;right&quot;</span><span class="s0">,</span>
                                                <span class="s3">&quot;top&quot;</span><span class="s1">: </span><span class="s3">&quot;bottom&quot;</span><span class="s0">,</span>
                                                <span class="s3">&quot;right&quot;</span><span class="s1">: </span><span class="s3">&quot;right&quot;</span><span class="s0">,</span>
                                                <span class="s3">&quot;bottom&quot;</span><span class="s1">: </span><span class="s3">&quot;bottom&quot;</span><span class="s1">}</span>
                                       <span class="s1">)</span>

        <span class="s1">text_block_rect = pygame.Rect(</span><span class="s4">0</span><span class="s0">, </span><span class="s4">0</span><span class="s0">,</span>
                                      <span class="s1">self.get_container().get_size()[</span><span class="s4">0</span><span class="s1">]</span><span class="s0">,</span>
                                      <span class="s1">self.get_container().get_size()[</span><span class="s4">1</span><span class="s1">] - button_vertical_space)</span>
        <span class="s1">self.text_block = UITextBox(html_message</span><span class="s0">, </span><span class="s1">text_block_rect</span><span class="s0">, </span><span class="s1">manager=manager</span><span class="s0">,</span>
                                    <span class="s1">container=self</span><span class="s0">,</span>
                                    <span class="s1">anchors={</span><span class="s3">&quot;left&quot;</span><span class="s1">: </span><span class="s3">&quot;left&quot;</span><span class="s0">,</span>
                                             <span class="s3">&quot;top&quot;</span><span class="s1">: </span><span class="s3">&quot;top&quot;</span><span class="s0">,</span>
                                             <span class="s3">&quot;right&quot;</span><span class="s1">: </span><span class="s3">&quot;right&quot;</span><span class="s0">,</span>
                                             <span class="s3">&quot;bottom&quot;</span><span class="s1">: </span><span class="s3">&quot;bottom&quot;</span><span class="s1">}</span>
                                    <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">process_event(self</span><span class="s0">, </span><span class="s1">event: pygame.event.Event) -&gt; bool:</span>
        <span class="s2">&quot;&quot;&quot; 
        Process any events relevant to the message window. In this case we just close the window 
        when the dismiss button is pressed. 
 
        :param event: a pygame.Event. 
 
        :return: Return True if we 'consumed' this event and don't want to pass it on to the rest 
                 of the UI. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">consumed_event = super().process_event(event)</span>

        <span class="s0">if </span><span class="s1">(event.type == pygame.USEREVENT </span><span class="s0">and </span><span class="s1">event.user_type == UI_BUTTON_PRESSED</span>
                <span class="s0">and </span><span class="s1">event.ui_element == self.dismiss_button):</span>
            <span class="s1">self.kill()</span>

        <span class="s0">return </span><span class="s1">consumed_event</span>
</pre>
</body>
</html>