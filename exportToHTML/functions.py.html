<html>
<head>
<title>functions.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6a8759;}
.s4 { color: #808080;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
functions.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">pygame.event </span><span class="s0">as </span><span class="s1">pygame_event</span>
<span class="s0">import </span><span class="s1">pygame</span>


<span class="s0">from </span><span class="s1">thorpy.miscgui </span><span class="s0">import </span><span class="s1">constants</span><span class="s0">, </span><span class="s1">application</span><span class="s0">, </span><span class="s1">parameters</span>

<span class="s0">def </span><span class="s1">get_max_screen_size():</span>
    <span class="s1">infoObject = pygame.display.Info()</span>
    <span class="s1">w</span><span class="s0">,</span><span class="s1">h = (infoObject.current_w</span><span class="s0">, </span><span class="s1">infoObject.current_h)</span>

<span class="s0">def </span><span class="s1">obtain_valid_painter(painter_class</span><span class="s0">, </span><span class="s1">**kwargs):</span>
    <span class="s2">&quot;&quot;&quot;Returns a valid painter whose class is &lt;painter_class&gt;. You can try any 
    argument you want ; only arguments existing in painter's __init__ method 
    will be used. 
    &quot;&quot;&quot;</span>
    <span class="s0">try</span><span class="s1">:</span>
        <span class="s1">painter = painter_class(**kwargs)</span>
    <span class="s0">except </span><span class="s1">TypeError:</span>
        <span class="s1">painter = painter_class()</span>
        <span class="s1">args_okay = {}</span>
        <span class="s0">for </span><span class="s1">arg </span><span class="s0">in </span><span class="s1">kwargs:</span>
            <span class="s0">if </span><span class="s1">hasattr(painter</span><span class="s0">, </span><span class="s1">arg):</span>
                <span class="s1">args_okay[arg] = kwargs[arg]</span>
        <span class="s1">painter = painter_class(**args_okay)</span>
    <span class="s0">return </span><span class="s1">painter</span>

<span class="s0">def </span><span class="s1">keypress(element</span><span class="s0">, </span><span class="s1">newstate):</span>
    <span class="s2">&quot;&quot;&quot;Make &lt;element&gt; goes in state &lt;newstate&gt;, refreshing the display.&quot;&quot;&quot;</span>
    <span class="s1">element.change_state(newstate)</span>
    <span class="s1">element.unblit()</span>
    <span class="s1">element.blit()</span>
    <span class="s1">element.update()</span>

<span class="s0">def </span><span class="s1">quit_func():</span>
    <span class="s2">&quot;&quot;&quot;Post quit event.&quot;&quot;&quot;</span>
    <span class="s1">pygame_event.post(constants.EVENT_QUIT)</span>

<span class="s0">def </span><span class="s1">set_current_menu(menu):</span>
    <span class="s1">debug_msg(</span><span class="s3">&quot;Set current menu: &quot;</span><span class="s0">, </span><span class="s1">menu)</span>
    <span class="s1">application._OLD_MENUS.append(application._CURRENT_MENU)</span>
    <span class="s1">application._CURRENT_MENU = menu</span>

<span class="s0">def </span><span class="s1">quit_menu_func():</span>
    <span class="s2">&quot;&quot;&quot;Leaves the current menu and set the new one as the previous one.&quot;&quot;&quot;</span>
    <span class="s1">debug_msg(</span><span class="s3">&quot;Quit menu func&quot;</span><span class="s0">, </span><span class="s1">application._CURRENT_MENU)</span>
    <span class="s1">application._CURRENT_MENU.set_leave()</span>
    <span class="s1">application._CURRENT_MENU = application._OLD_MENUS.pop()</span>

<span class="s0">def </span><span class="s1">add_element_to_current_menu(element):</span>
    <span class="s1">debug_msg(</span><span class="s3">&quot;add element to current menu: &quot; </span><span class="s1">+ element.get_text())</span>
    <span class="s1">application._CURRENT_MENU.add_to_population(element)</span>

<span class="s0">def </span><span class="s1">get_current_menu():</span>
    <span class="s0">return </span><span class="s1">application._CURRENT_MENU</span>

<span class="s0">def </span><span class="s1">get_current_application():</span>
    <span class="s0">return </span><span class="s1">application._CURRENT_APPLICATION</span>

<span class="s0">def </span><span class="s1">get_screen():</span>
    <span class="s0">return </span><span class="s1">pygame.display.get_surface()</span>
<span class="s4">##    return application._SCREEN</span>

<span class="s0">def </span><span class="s1">get_screen_size():</span>
    <span class="s0">return </span><span class="s1">get_screen().get_rect().size</span>

<span class="s0">def </span><span class="s1">refresh_current_menu():</span>
    <span class="s2">&quot;&quot;&quot;Refreshes the current menu events. Use it to include newly added 
    elements. Returns True if a menu has been refreshed, else returns False. 
    &quot;&quot;&quot;</span>
    <span class="s1">debug_msg(</span><span class="s3">&quot;Refreshing current menu.&quot;</span><span class="s1">)</span>
    <span class="s1">current_menu = get_current_menu()</span>
    <span class="s0">if </span><span class="s1">current_menu:</span>
        <span class="s1">current_menu.refresh()</span>
        <span class="s0">return True</span>
    <span class="s0">else</span><span class="s1">:</span>
        <span class="s0">return False</span>

<span class="s0">def </span><span class="s1">debug_msg(*content):</span>
    <span class="s0">if </span><span class="s1">application.DEBUG_MODE:</span>
        <span class="s1">str_content = list()</span>
        <span class="s0">for </span><span class="s1">e </span><span class="s0">in </span><span class="s1">content:</span>
            <span class="s1">str_content.append(str(e) + </span><span class="s3">&quot; &quot;</span><span class="s1">)</span>
        <span class="s1">print(</span><span class="s3">&quot;Thorpy debug : &quot; </span><span class="s1">+ </span><span class="s3">''</span><span class="s1">.join(str_content))</span>

<span class="s0">def </span><span class="s1">info_msg(*content):</span>
    <span class="s0">if </span><span class="s1">application.DEBUG_MODE:</span>
        <span class="s1">str_content = list()</span>
        <span class="s0">for </span><span class="s1">e </span><span class="s0">in </span><span class="s1">content:</span>
            <span class="s1">str_content.append(str(e) + </span><span class="s3">&quot; &quot;</span><span class="s1">)</span>
        <span class="s1">print(</span><span class="s3">&quot;Thorpy info : &quot; </span><span class="s1">+ </span><span class="s3">''</span><span class="s1">.join(str_content))</span>

<span class="s0">def </span><span class="s1">get_fps():</span>
    <span class="s0">return </span><span class="s1">application._CURRENT_MENU.clock.get_fps()</span>

<span class="s0">def </span><span class="s1">remove_element(element):</span>
    <span class="s1">removed = </span><span class="s0">False</span>
    <span class="s1">current_menu = get_current_menu()</span>
    <span class="s0">if </span><span class="s1">current_menu:</span>
        <span class="s0">for </span><span class="s1">e </span><span class="s0">in </span><span class="s1">current_menu.get_population():</span>
            <span class="s0">if </span><span class="s1">element </span><span class="s0">in </span><span class="s1">e.get_elements():</span>
                <span class="s1">e.remove_elements([element])</span>
                <span class="s1">removed = </span><span class="s0">True</span>
        <span class="s0">if </span><span class="s1">element </span><span class="s0">in </span><span class="s1">current_menu.get_population():</span>
            <span class="s1">population = get_current_menu.get_population()</span>
            <span class="s1">population.remove(element)</span>
            <span class="s1">removed = </span><span class="s0">True</span>
    <span class="s0">else</span><span class="s1">:</span>
        <span class="s1">debug_msg(</span><span class="s3">&quot;Could not remove element&quot;</span><span class="s0">, </span><span class="s1">element</span><span class="s0">, </span><span class="s3">&quot; since there is no</span><span class="s0">\ 
                    </span><span class="s3">current menu.&quot;</span><span class="s1">)</span>
    <span class="s0">if </span><span class="s1">removed:</span>
        <span class="s1">refresh_current_menu()</span>

<span class="s0">def </span><span class="s1">get_default_font_infos():</span>
    <span class="s0">from </span><span class="s1">thorpy.painting.writer </span><span class="s0">import </span><span class="s1">get_font_name</span>
    <span class="s0">from </span><span class="s1">thorpy.miscgui </span><span class="s0">import </span><span class="s1">style</span>
    <span class="s0">return </span><span class="s1">{</span><span class="s3">&quot;name&quot;</span><span class="s1">:get_font_name(</span><span class="s0">None</span><span class="s1">)</span><span class="s0">, </span><span class="s3">&quot;size&quot;</span><span class="s1">:style.FONT_SIZE}</span>

<span class="s0">def </span><span class="s1">writing(delay=</span><span class="s5">30</span><span class="s0">,</span><span class="s1">interval=</span><span class="s5">100</span><span class="s0">,</span><span class="s1">interval_pygame=</span><span class="s5">500</span><span class="s1">):</span>
    <span class="s1">parameters.KEY_DELAY = delay</span>
    <span class="s1">parameters.KEY_INTERVAL = interval</span>
    <span class="s1">pygame.key.set_repeat(delay</span><span class="s0">,</span><span class="s1">interval_pygame)</span>

<span class="s0">def </span><span class="s1">playing(delay</span><span class="s0">,</span><span class="s1">interval):</span>
    <span class="s1">parameters.KEY_DELAY = delay</span>
    <span class="s1">parameters.KEY_INTERVAL = interval</span>
    <span class="s1">pygame.key.set_repeat(delay</span><span class="s0">,</span><span class="s1">interval)</span></pre>
</body>
</html>