<html>
<head>
<title>ui_image.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6897bb;}
.s4 { color: #6a8759;}
.s5 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ui_image.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s1">Union</span><span class="s0">, </span><span class="s1">Tuple</span><span class="s0">, </span><span class="s1">Dict</span>

<span class="s0">import </span><span class="s1">pygame</span>

<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">ObjectID</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.interfaces </span><span class="s0">import </span><span class="s1">IContainerLikeInterface</span><span class="s0">, </span><span class="s1">IUIManagerInterface</span>
<span class="s0">from </span><span class="s1">pygame_gui.core </span><span class="s0">import </span><span class="s1">UIElement</span>
<span class="s0">from </span><span class="s1">pygame_gui.core.utility </span><span class="s0">import </span><span class="s1">premul_alpha_surface</span>


<span class="s0">class </span><span class="s1">UIImage(UIElement):</span>
    <span class="s2">&quot;&quot;&quot; 
    Displays a pygame surface as a UI element, intended for an image but it can serve 
    other purposes. 
 
    :param relative_rect: The rectangle that contains, positions and scales the image relative to 
                          it's container. 
    :param image_surface: A pygame surface to display. 
    :param manager: The UIManager that manages this element. 
    :param container: The container that this element is within. If set to None will be the root 
                      window's container. 
    :param parent_element: The element this element 'belongs to' in the theming hierarchy. 
    :param object_id: A custom defined ID for fine tuning of theming. 
    :param anchors: A dictionary describing what this element's relative_rect is relative to. 
    :param visible: Whether the element is visible by default. Warning - container visibility 
                    may override this. 
    &quot;&quot;&quot;</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">,</span>
                 <span class="s1">relative_rect: pygame.Rect</span><span class="s0">,</span>
                 <span class="s1">image_surface: pygame.surface.Surface</span><span class="s0">,</span>
                 <span class="s1">manager: IUIManagerInterface</span><span class="s0">,</span>
                 <span class="s1">container: Union[IContainerLikeInterface</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">parent_element: UIElement = </span><span class="s0">None,</span>
                 <span class="s1">object_id: Union[ObjectID</span><span class="s0">, </span><span class="s1">str</span><span class="s0">, None</span><span class="s1">] = </span><span class="s0">None,</span>
                 <span class="s1">anchors: Dict[str</span><span class="s0">, </span><span class="s1">str] = </span><span class="s0">None,</span>
                 <span class="s1">visible: int = </span><span class="s3">1</span><span class="s1">):</span>

        <span class="s1">super().__init__(relative_rect</span><span class="s0">, </span><span class="s1">manager</span><span class="s0">, </span><span class="s1">container</span><span class="s0">,</span>
                         <span class="s1">starting_height=</span><span class="s3">1</span><span class="s0">,</span>
                         <span class="s1">layer_thickness=</span><span class="s3">1</span><span class="s0">,</span>

                         <span class="s1">anchors=anchors</span><span class="s0">,</span>
                         <span class="s1">visible=visible)</span>

        <span class="s1">self._create_valid_ids(container=container</span><span class="s0">,</span>
                               <span class="s1">parent_element=parent_element</span><span class="s0">,</span>
                               <span class="s1">object_id=object_id</span><span class="s0">,</span>
                               <span class="s1">element_id=</span><span class="s4">'image'</span><span class="s1">)</span>

        <span class="s1">self.original_image = </span><span class="s0">None</span>
        <span class="s5"># GUI images must support an alpha channel &amp; must have their alpha channel pre-multiplied</span>
        <span class="s5"># with their colours.</span>
        <span class="s1">image_surface = premul_alpha_surface(image_surface.convert_alpha())</span>
        <span class="s0">if </span><span class="s1">(image_surface.get_width() != self.rect.width </span><span class="s0">or</span>
                <span class="s1">image_surface.get_height() != self.rect.height):</span>
            <span class="s1">self.original_image = image_surface</span>
            <span class="s1">self.set_image(pygame.transform.smoothscale(self.original_image</span><span class="s0">, </span><span class="s1">self.rect.size))</span>
        <span class="s0">else</span><span class="s1">:</span>
            <span class="s1">self.set_image(image_surface)</span>

    <span class="s0">def </span><span class="s1">set_dimensions(self</span><span class="s0">, </span><span class="s1">dimensions: Union[pygame.math.Vector2</span><span class="s0">,</span>
                                               <span class="s1">Tuple[int</span><span class="s0">, </span><span class="s1">int]</span><span class="s0">,</span>
                                               <span class="s1">Tuple[float</span><span class="s0">, </span><span class="s1">float]]):</span>
        <span class="s2">&quot;&quot;&quot; 
        Set the dimensions of this image, scaling the image surface to match. 
 
        :param dimensions: The new dimensions of the image. 
 
        &quot;&quot;&quot;</span>
        <span class="s1">super().set_dimensions(dimensions)</span>

        <span class="s0">if </span><span class="s1">self.rect.size != self.image.get_size():</span>
            <span class="s0">if </span><span class="s1">self.original_image </span><span class="s0">is None</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">self._pre_clipped_image </span><span class="s0">is not None</span><span class="s1">:</span>
                    <span class="s1">self.original_image = self._pre_clipped_image</span>
                <span class="s0">else</span><span class="s1">:</span>
                    <span class="s1">self.original_image = self.image</span>
            <span class="s1">self.set_image(pygame.transform.smoothscale(self.original_image</span><span class="s0">, </span><span class="s1">self.rect.size))</span>
</pre>
</body>
</html>